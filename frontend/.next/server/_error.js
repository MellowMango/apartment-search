/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "/_error";
exports.ids = ["/_error"];
exports.modules = {

/***/ "./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"./node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./pages/_app.js\");\n/* harmony import */ var _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./node_modules/next/dist/pages/_error.js */ \"./node_modules/next/dist/pages/_error.js\");\n/* harmony import */ var _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/_error\",\n        pathname: \"/_error\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default())\n    },\n    userland: _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTJnBhZ2U9JTJGX2Vycm9yJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZwYWdlcyUyRl9lcnJvci5qcyZhYnNvbHV0ZUFwcFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2FwcCZhYnNvbHV0ZURvY3VtZW50UGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfZG9jdW1lbnQmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUNoQztBQUNMO0FBQzFEO0FBQ29EO0FBQ1Y7QUFDMUM7QUFDcUU7QUFDckU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG1FQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLHVCQUF1Qix3RUFBSyxDQUFDLG1FQUFRO0FBQ3JDLHVCQUF1Qix3RUFBSyxDQUFDLG1FQUFRO0FBQ3JDLDJCQUEyQix3RUFBSyxDQUFDLG1FQUFRO0FBQ3pDLGVBQWUsd0VBQUssQ0FBQyxtRUFBUTtBQUM3Qix3QkFBd0Isd0VBQUssQ0FBQyxtRUFBUTtBQUM3QztBQUNPLGdDQUFnQyx3RUFBSyxDQUFDLG1FQUFRO0FBQzlDLGdDQUFnQyx3RUFBSyxDQUFDLG1FQUFRO0FBQzlDLGlDQUFpQyx3RUFBSyxDQUFDLG1FQUFRO0FBQy9DLGdDQUFnQyx3RUFBSyxDQUFDLG1FQUFRO0FBQzlDLG9DQUFvQyx3RUFBSyxDQUFDLG1FQUFRO0FBQ3pEO0FBQ08sd0JBQXdCLHlHQUFnQjtBQUMvQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFdBQVc7QUFDWCxnQkFBZ0I7QUFDaEIsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXVzdGluLW11bHRpZmFtaWx5LW1hcC8/NTU5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc1JvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIGFwcCBhbmQgZG9jdW1lbnQgbW9kdWxlcy5cbmltcG9ydCBEb2N1bWVudCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19kb2N1bWVudFwiO1xuaW1wb3J0IEFwcCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19hcHBcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvcGFnZXMvX2Vycm9yLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGNvbXBvbmVudCAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IG1ldGhvZHMuXG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTdGF0aWNQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFN0YXRpY1BhdGhzXCIpO1xuZXhwb3J0IGNvbnN0IGdldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFNlcnZlclNpZGVQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG5leHBvcnQgY29uc3QgcmVwb3J0V2ViVml0YWxzID0gaG9pc3QodXNlcmxhbmQsIFwicmVwb3J0V2ViVml0YWxzXCIpO1xuLy8gUmUtZXhwb3J0IGxlZ2FjeSBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUHJvcHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUGF0aHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQYXRoc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTZXJ2ZXJTaWRlUHJvcHNcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc1JvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgcGFnZTogXCIvX2Vycm9yXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9fZXJyb3JcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgICBBcHAsXG4gICAgICAgIERvY3VtZW50XG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTestProperty: () => (/* binding */ createTestProperty),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   fetchProperties: () => (/* binding */ fetchProperties),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut),\n/* harmony export */   signUp: () => (/* binding */ signUp),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Supabase client for frontend operations\n */ \n// Get Supabase credentials from environment variables\nconst supabaseUrl = \"https://vdrtfnphuixbguedqhox.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZkcnRmbnBodWl4Ymd1ZWRxaG94Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3Mjk4MDEsImV4cCI6MjA1NzMwNTgwMX0.HyefAulcyuFeTELrskYNJEhSAW1KqBNoyJ1ODfrY5UA\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Supabase credentials not found. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.\");\n}\n// Create Supabase client\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: true,\n        persistSession: true,\n        detectSessionInUrl: true\n    }\n});\n/**\n * Get the current authenticated user\n * @returns {Promise<Object|null>} The user object or null if not authenticated\n */ const getCurrentUser = async ()=>{\n    const { data: { user } } = await supabase.auth.getUser();\n    return user;\n};\n/**\n * Sign up a new user\n * @param {string} email - User's email\n * @param {string} password - User's password\n * @returns {Promise<Object>} The result of the sign up operation\n */ const signUp = async (email, password)=>{\n    return await supabase.auth.signUp({\n        email,\n        password\n    });\n};\n/**\n * Sign in a user\n * @param {string} email - User's email\n * @param {string} password - User's password\n * @returns {Promise<Object>} The result of the sign in operation\n */ const signIn = async (email, password)=>{\n    return await supabase.auth.signInWithPassword({\n        email,\n        password\n    });\n};\n/**\n * Sign out the current user\n * @returns {Promise<Object>} The result of the sign out operation\n */ const signOut = async ()=>{\n    return await supabase.auth.signOut();\n};\n/**\n * Fetch properties from Supabase with enhanced error handling and data normalization\n * \n * @param {Object} options - Query options\n * @param {Object} options.filters - Key-value pairs for filtering (e.g. {status: 'For Sale'})\n * @param {number} options.page - Page number for pagination\n * @param {number} options.pageSize - Number of items per page\n * @param {string} options.sortBy - Field to sort by\n * @param {boolean} options.sortAsc - Sort in ascending order if true\n * @param {boolean} options.includeIncomplete - Whether to include properties with missing coordinates\n * @param {boolean} options.includeResearch - Whether to include enriched research data\n * @param {boolean} options.noLimit - Whether to bypass pagination limits and get all properties\n * @param {Object} options.bounds - Geographical bounds to filter properties (north, south, east, west)\n * @returns {Promise<Array>} Array of normalized properties\n */ const fetchProperties = async (options = {})=>{\n    console.log(\"Fetching properties with options:\", JSON.stringify(options, null, 2));\n    // Check if we should join with research data\n    if (options.includeResearch !== false) {\n        // Include research data in our query - we'll join with property_research table\n        try {\n            // Start with a query that joins properties with research data\n            let query = supabase.from(\"properties\").select(`\n          *,\n          property_research:property_research(*)\n        `);\n            // Apply filters if provided\n            if (options.filters) {\n                Object.entries(options.filters).forEach(([key, value])=>{\n                    if (value !== undefined && value !== null && value !== \"\") {\n                        // Handle special filter syntax\n                        if (key === \"or\") {\n                            query = query.or(value);\n                        } else if (key.endsWith(\"_gte\")) {\n                            const actualKey = key.replace(\"_gte\", \"\");\n                            query = query.gte(actualKey, value);\n                        } else if (key.endsWith(\"_lte\")) {\n                            const actualKey = key.replace(\"_lte\", \"\");\n                            query = query.lte(actualKey, value);\n                        } else if (key.endsWith(\"_gt\")) {\n                            const actualKey = key.replace(\"_gt\", \"\");\n                            query = query.gt(actualKey, value);\n                        } else if (key.endsWith(\"_lt\")) {\n                            const actualKey = key.replace(\"_lt\", \"\");\n                            query = query.lt(actualKey, value);\n                        } else if (key.endsWith(\"_ilike\")) {\n                            const actualKey = key.replace(\"_ilike\", \"\");\n                            query = query.ilike(actualKey, value);\n                        } else {\n                            // Default to equality matching\n                            query = query.eq(key, value);\n                        }\n                    }\n                });\n            }\n            // Apply geographical bounds if provided to limit to visible area\n            if (options.bounds) {\n                const { north, south, east, west } = options.bounds;\n                if (north && south && east && west) {\n                    // Only get properties within the current map bounds\n                    query = query.gte(\"latitude\", south).lte(\"latitude\", north).gte(\"longitude\", west).lte(\"longitude\", east);\n                    console.log(`Applying geographical bounds filter: lat ${south}-${north}, lng ${west}-${east}`);\n                }\n            }\n            // If we need complete properties with coordinates for the map\n            if (!options.includeIncomplete) {\n                // Use a more precise filter to avoid empty/zero coordinates\n                // First prioritize properties with valid coordinates (either direct or from research)\n                query = query.not(\"latitude\", \"is\", null).not(\"longitude\", \"is\", null).not(\"latitude\", \"eq\", 0).not(\"longitude\", \"eq\", 0).order(\"created_at\", {\n                    ascending: false\n                });\n                console.log(\"Querying for properties with valid coordinates only\");\n            } else {\n                console.log(\"Including all properties regardless of coordinates\");\n            }\n            // Apply pagination unless noLimit is set to true\n            if (!options.noLimit && options.page && options.pageSize) {\n                const start = (options.page - 1) * options.pageSize;\n                const end = start + options.pageSize - 1;\n                query = query.range(start, end);\n                console.log(`Applying pagination: range ${start}-${end}`);\n            } else if (options.noLimit) {\n                // When loading all properties, we'll limit to 2500 max for performance\n                // This should be enough for the entire dataset\n                query = query.limit(2500);\n                console.log(\"Loading up to 2500 properties (bypassing pagination)\");\n            }\n            // Apply sorting\n            if (options.sortBy) {\n                query = query.order(options.sortBy, {\n                    ascending: options.sortAsc !== false\n                });\n            }\n            // Execute query\n            console.log(\"Executing Supabase query...\");\n            const { data, error } = await query;\n            if (error) {\n                // If this fails, we'll fall back to the non-join query\n                console.warn(\"Error fetching properties with research join:\", error);\n            // Continue to fallback query below\n            } else if (data && data.length > 0) {\n                console.log(`Found ${data.length} properties with research data`);\n                // Merge research data with property data\n                const normalizedProperties = data.map((property)=>{\n                    // Extract research data if available\n                    const researchData = property.property_research && property.property_research.length > 0 ? property.property_research[0] : null;\n                    // Delete the nested property_research to avoid confusion\n                    delete property.property_research;\n                    // Normalize the property\n                    const normalizedProperty = normalizeProperty(property);\n                    // If we have research data with valid coordinates, use them\n                    if (researchData && researchData.modules) {\n                        try {\n                            // Check for valid coordinates in property_details module\n                            const propertyDetails = researchData.modules.property_details || {};\n                            // Only use research coordinates if they're valid and property doesn't have them\n                            if (propertyDetails.latitude && propertyDetails.longitude && typeof propertyDetails.latitude === \"number\" && typeof propertyDetails.longitude === \"number\" && !normalizedProperty._is_grid_pattern) {\n                                normalizedProperty.latitude = propertyDetails.latitude;\n                                normalizedProperty.longitude = propertyDetails.longitude;\n                                normalizedProperty._coordinates_from_research = true;\n                                normalizedProperty._coordinates_missing = false;\n                                normalizedProperty._needs_geocoding = false;\n                                console.log(`Using research coordinates for property ${property.id}: [${propertyDetails.latitude}, ${propertyDetails.longitude}]`);\n                            }\n                            // Add research data to property\n                            normalizedProperty._research = {\n                                depth: researchData.research_depth,\n                                date: researchData.research_date,\n                                summary: researchData.executive_summary\n                            };\n                        } catch (e) {\n                            console.error(\"Error processing research data:\", e);\n                        }\n                    }\n                    return normalizedProperty;\n                });\n                // For map view, filter out properties without valid coordinates\n                if (!options.includeIncomplete) {\n                    const propertiesWithCoordinates = normalizedProperties.filter((p)=>p.latitude && p.longitude && (p._coordinates_from_research || !p._coordinates_missing && !p._is_grid_pattern));\n                    console.log(`Filtered to ${propertiesWithCoordinates.length} properties with valid coordinates`);\n                    if (propertiesWithCoordinates.length > 0) {\n                        return propertiesWithCoordinates;\n                    }\n                    // If all properties were filtered out, return them anyway to avoid empty map\n                    console.warn(\"All properties were filtered out for having invalid coordinates\");\n                }\n                return normalizedProperties;\n            }\n        } catch (joinError) {\n            console.error(\"Error with research join query:\", joinError);\n        // Fall back to standard query\n        }\n    }\n    // Fallback - standard query without research data\n    console.log(\"Using standard property query without research data\");\n    let query = supabase.from(\"properties\").select(\"*\");\n    // Apply filters if provided\n    if (options.filters) {\n        Object.entries(options.filters).forEach(([key, value])=>{\n            if (value !== undefined && value !== null && value !== \"\") {\n                // Handle special filter syntax\n                if (key === \"or\") {\n                    query = query.or(value);\n                } else if (key.endsWith(\"_gte\")) {\n                    const actualKey = key.replace(\"_gte\", \"\");\n                    query = query.gte(actualKey, value);\n                } else if (key.endsWith(\"_lte\")) {\n                    const actualKey = key.replace(\"_lte\", \"\");\n                    query = query.lte(actualKey, value);\n                } else if (key.endsWith(\"_gt\")) {\n                    const actualKey = key.replace(\"_gt\", \"\");\n                    query = query.gt(actualKey, value);\n                } else if (key.endsWith(\"_lt\")) {\n                    const actualKey = key.replace(\"_lt\", \"\");\n                    query = query.lt(actualKey, value);\n                } else if (key.endsWith(\"_ilike\")) {\n                    const actualKey = key.replace(\"_ilike\", \"\");\n                    query = query.ilike(actualKey, value);\n                } else {\n                    // Default to equality matching\n                    query = query.eq(key, value);\n                }\n            }\n        });\n    }\n    // Apply geographical bounds if provided\n    if (options.bounds) {\n        const { north, south, east, west } = options.bounds;\n        if (north && south && east && west) {\n            // Only get properties within the current map bounds\n            query = query.gte(\"latitude\", south).lte(\"latitude\", north).gte(\"longitude\", west).lte(\"longitude\", east);\n            console.log(`Applying geographical bounds filter: lat ${south}-${north}, lng ${west}-${east}`);\n        }\n    }\n    // If we need complete properties with coordinates for the map\n    if (!options.includeIncomplete) {\n        // Use a more precise filter to avoid empty/zero coordinates\n        // First prioritize properties with valid coordinates (either direct or from research)\n        query = query.not(\"latitude\", \"is\", null).not(\"longitude\", \"is\", null).not(\"latitude\", \"eq\", 0).not(\"longitude\", \"eq\", 0).order(\"created_at\", {\n            ascending: false\n        });\n        console.log(\"Querying for properties with valid coordinates only\");\n    } else {\n        console.log(\"Including all properties regardless of coordinates\");\n    }\n    // Apply pagination unless noLimit is set to true\n    if (!options.noLimit && options.page && options.pageSize) {\n        const start = (options.page - 1) * options.pageSize;\n        const end = start + options.pageSize - 1;\n        query = query.range(start, end);\n        console.log(`Applying pagination: range ${start}-${end}`);\n    } else if (options.noLimit) {\n        // When loading all properties, we'll limit to 2500 max for performance\n        // This should be enough for the entire dataset\n        query = query.limit(2500);\n        console.log(\"Loading up to 2500 properties (bypassing pagination)\");\n    }\n    // Apply sorting\n    if (options.sortBy) {\n        query = query.order(options.sortBy, {\n            ascending: options.sortAsc !== false\n        });\n    }\n    // Execute query\n    console.log(\"Executing Supabase query...\");\n    const { data, error } = await query;\n    if (error) {\n        console.error(\"Error fetching properties:\", error);\n        throw error;\n    }\n    if (!data || data.length === 0) {\n        console.warn(\"No properties found with the given criteria\");\n        return [];\n    }\n    console.log(`Fetched ${data.length} properties successfully`);\n    // Normalize property data to handle inconsistencies\n    return data.map((property)=>normalizeProperty(property));\n};\n/**\n * Normalizes property data to handle inconsistent field names\n * \n * @param {Object} property - Raw property data from Supabase\n * @returns {Object} Normalized property data\n */ const normalizeProperty = (property)=>{\n    // Make copy to avoid mutating the original\n    const normalized = {\n        ...property\n    };\n    // Handle inconsistent unit field names\n    normalized.units = property.num_units || property.units || null;\n    // Use property name or derive from address if missing\n    if (!normalized.name || normalized.name.trim() === \"\") {\n        normalized.name = property.address ? `Property at ${property.address.split(\",\")[0]}` : `Property ${property.id.substring(0, 8)}`;\n    }\n    // Make sure we have status\n    normalized.status = property.status || property.property_status || \"Listed\";\n    // Check if this is likely a test property\n    normalized._is_test_property = isTestProperty(property);\n    // Add coordinate related flags\n    if (property.latitude && property.longitude && typeof property.latitude === \"number\" && typeof property.longitude === \"number\" && !(property.latitude === 0 && property.longitude === 0)) {\n        // Check if coordinates are valid (in proper lat/long ranges)\n        const isValidLatitude = property.latitude >= -90 && property.latitude <= 90;\n        const isValidLongitude = property.longitude >= -180 && property.longitude <= 180;\n        // Austin area boundaries (approximate) - helps detect obviously wrong coordinates\n        const isInAustinArea = property.latitude >= 29.5 && property.latitude <= 31.0 && property.longitude >= -98.0 && property.longitude <= -97.0;\n        // Check if coordinates are part of a grid pattern (low precision or suspicious patterns)\n        const latStr = String(property.latitude);\n        const lngStr = String(property.longitude);\n        // Only flag very low precision coordinates as suspicious (1 decimal place or less)\n        const hasLowPrecision = latStr.includes(\".\") && latStr.split(\".\")[1].length <= 1 || lngStr.includes(\".\") && lngStr.split(\".\")[1].length <= 1;\n        // Reduced set of suspicious patterns\n        const hasSuspiciousPattern = latStr === lngStr || // Same lat/lng is very unlikely\n        latStr.endsWith(\"00000\") || lngStr.endsWith(\"00000\");\n        // Keep track of whether this is detected as a grid pattern\n        const isGridPattern = hasLowPrecision || hasSuspiciousPattern;\n        // Flag coordinates as missing if they're invalid or suspicious\n        if (!isValidLatitude || !isValidLongitude || isGridPattern) {\n            normalized._coordinates_missing = true;\n            normalized._needs_geocoding = true;\n            normalized._is_grid_pattern = isGridPattern;\n            normalized._is_invalid_range = !isValidLatitude || !isValidLongitude;\n            // Debug info for invalid coordinates\n            if (!isValidLatitude || !isValidLongitude) {\n                console.warn(`Invalid coordinate range for property ${property.id}: [${property.latitude}, ${property.longitude}]`);\n            }\n        } else {\n            // Set additional flags for coordinates outside Austin (might be valid but suspicious)\n            normalized._outside_austin = !isInAustinArea;\n            normalized._coordinates_missing = false;\n            normalized._needs_geocoding = false;\n        }\n    } else {\n        // No coordinates or invalid coordinates\n        normalized._coordinates_missing = true;\n        normalized._needs_geocoding = true;\n    }\n    return normalized;\n};\n/**\n * Determines if a property is likely a test/example property\n * \n * @param {Object} property - Property data to check\n * @returns {boolean} True if property is likely a test property\n */ const isTestProperty = (property)=>{\n    // Check for common test property indicators in name\n    const name = (property.name || \"\").toLowerCase();\n    const testIndicators = [\n        \"test\",\n        \"example\",\n        \"sample\",\n        \"demo\",\n        \"dummy\",\n        \"template\"\n    ];\n    for (const indicator of testIndicators){\n        if (name.includes(indicator)) {\n            return true;\n        }\n    }\n    // Check for unrealistic values\n    if (property.price === 0 || property.price === 1) {\n        return true;\n    }\n    if (property.units === 0 || property.units === 999 || property.num_units === 0 || property.num_units === 999) {\n        return true;\n    }\n    // Check for placeholder addresses\n    const address = (property.address || \"\").toLowerCase();\n    const placeholderIndicators = [\n        \"123 main\",\n        \"test address\",\n        \"example\",\n        \"placeholder\"\n    ];\n    for (const indicator of placeholderIndicators){\n        if (address.includes(indicator)) {\n            return true;\n        }\n    }\n    return false;\n};\n/**\n * Creates a test property in the database for testing purposes\n * Use this to verify the database connection is working\n * \n * @returns {Promise<Object>} The created test property\n */ const createTestProperty = async ()=>{\n    // First, check if we can get the table structure\n    try {\n        // Try to get one record to see the schema\n        const { data: sampleProperty, error: sampleError } = await supabase.from(\"properties\").select(\"*\").limit(1);\n        // Basic test property that matches the schema from supabase-setup.md\n        const baseTestProperty = {\n            name: `Test Property ${new Date().toISOString().slice(0, 16)}`,\n            address: \"123 Test Street\",\n            city: \"Austin\",\n            state: \"TX\",\n            zip_code: \"78701\",\n            latitude: 30.2672,\n            longitude: -97.7431,\n            price: 5000000,\n            units: 50,\n            year_built: 2010,\n            property_type: \"MULTIFAMILY\",\n            status: \"available\",\n            description: \"This is a test property created to verify database connectivity.\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        // If we have a sample, adapt to its schema\n        let testProperty = baseTestProperty;\n        if (!sampleError && sampleProperty && sampleProperty.length > 0) {\n            console.log(\"Found existing property for schema reference:\", sampleProperty[0]);\n            // Adapt our test property to match the existing schema\n            const sample = sampleProperty[0];\n            // Create a new object with only the fields that exist in the sample\n            const adaptedProperty = {};\n            Object.keys(baseTestProperty).forEach((key)=>{\n                // If the field exists in the sample, use our test value\n                if (key in sample) {\n                    adaptedProperty[key] = baseTestProperty[key];\n                }\n            });\n            // Check key fields that might have different names\n            if (\"property_status\" in sample && !(\"status\" in sample)) {\n                adaptedProperty.property_status = baseTestProperty.status;\n                delete adaptedProperty.status;\n            }\n            if (\"num_units\" in sample && !(\"units\" in sample)) {\n                adaptedProperty.num_units = baseTestProperty.units;\n                delete adaptedProperty.units;\n            }\n            // Use the adapted property\n            testProperty = adaptedProperty;\n            console.log(\"Adapted test property to match schema:\", testProperty);\n        } else {\n            console.log(\"No sample property found, using default schema\");\n        }\n        // Try to insert the test property\n        const { data, error } = await supabase.from(\"properties\").insert(testProperty).select();\n        if (error) {\n            console.error(\"Error creating test property:\", error);\n            // Try again with minimal fields if this failed\n            if (error.message && (error.message.includes(\"violates not-null constraint\") || error.message.includes(\"missing\"))) {\n                console.log(\"Trying again with minimal required fields\");\n                // Try with just the bare minimum fields\n                const minimalProperty = {\n                    name: `Test Property ${new Date().toISOString().slice(0, 16)}`,\n                    address: \"123 Test Street\",\n                    city: \"Austin\",\n                    state: \"TX\"\n                };\n                const { data: minData, error: minError } = await supabase.from(\"properties\").insert(minimalProperty).select();\n                if (minError) {\n                    console.error(\"Error creating minimal property:\", minError);\n                    throw minError;\n                }\n                console.log(\"Successfully created minimal test property:\", minData);\n                return {\n                    data: minData,\n                    info: \"Created with minimal fields only\"\n                };\n            }\n            throw error;\n        }\n        console.log(\"Test property created:\", data);\n        return {\n            data,\n            info: \"Created with full fields\"\n        };\n    } catch (err) {\n        console.error(\"Error in createTestProperty:\", err);\n        throw err;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8sQ0FBQzlCLFFBQVEsQ0FBQyxtQ0FDeEI5RyxNQUFNNEksT0FBTyxDQUFDOUIsUUFBUSxDQUFDLFVBQVMsR0FBSTtnQkFDdkQvRyxRQUFRbUIsR0FBRyxDQUFDO2dCQUVaLHdDQUF3QztnQkFDeEMsTUFBTTJILGtCQUFrQjtvQkFDdEIvQyxNQUFNLENBQUMsY0FBYyxFQUFFLElBQUk4QixPQUFPQyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQztvQkFDOUQ5QixTQUFTO29CQUNUK0IsTUFBTTtvQkFDTkMsT0FBTztnQkFDVDtnQkFFQSxNQUFNLEVBQUV6SCxNQUFNdUksT0FBTyxFQUFFOUksT0FBTytJLFFBQVEsRUFBRSxHQUFHLE1BQU05SSxTQUM5Q3NCLElBQUksQ0FBQyxjQUNMb0gsTUFBTSxDQUFDRSxpQkFDUHJILE1BQU07Z0JBRVQsSUFBSXVILFVBQVU7b0JBQ1poSixRQUFRQyxLQUFLLENBQUMsb0NBQW9DK0k7b0JBQ2xELE1BQU1BO2dCQUNSO2dCQUVBaEosUUFBUW1CLEdBQUcsQ0FBQywrQ0FBK0M0SDtnQkFDM0QsT0FBTztvQkFDTHZJLE1BQU11STtvQkFDTkUsTUFBTTtnQkFDUjtZQUNGO1lBRUEsTUFBTWhKO1FBQ1I7UUFFQUQsUUFBUW1CLEdBQUcsQ0FBQywwQkFBMEJYO1FBQ3RDLE9BQU87WUFDTEE7WUFDQXlJLE1BQU07UUFDUjtJQUNGLEVBQUUsT0FBT0MsS0FBSztRQUNabEosUUFBUUMsS0FBSyxDQUFDLGdDQUFnQ2lKO1FBQzlDLE1BQU1BO0lBQ1I7QUFDRixFQUFFO0FBRUYsaUVBQWVoSixRQUFRQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXVzdGluLW11bHRpZmFtaWx5LW1hcC8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3VwYWJhc2UgY2xpZW50IGZvciBmcm9udGVuZCBvcGVyYXRpb25zXG4gKi9cbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbi8vIEdldCBTdXBhYmFzZSBjcmVkZW50aWFscyBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIGNvbnNvbGUuZXJyb3IoXG4gICAgJ1N1cGFiYXNlIGNyZWRlbnRpYWxzIG5vdCBmb3VuZC4gUGxlYXNlIHNldCBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgYW5kIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIGVudmlyb25tZW50IHZhcmlhYmxlcy4nXG4gICk7XG59XG5cbi8vIENyZWF0ZSBTdXBhYmFzZSBjbGllbnRcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gIGF1dGg6IHtcbiAgICBhdXRvUmVmcmVzaFRva2VuOiB0cnVlLFxuICAgIHBlcnNpc3RTZXNzaW9uOiB0cnVlLFxuICAgIGRldGVjdFNlc3Npb25JblVybDogdHJ1ZVxuICB9XG59KTtcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRlZCB1c2VyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFRoZSB1c2VyIG9iamVjdCBvciBudWxsIGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50VXNlciA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG4gIHJldHVybiB1c2VyO1xufTtcblxuLyoqXG4gKiBTaWduIHVwIGEgbmV3IHVzZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFVzZXIncyBlbWFpbFxuICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkIC0gVXNlcidzIHBhc3N3b3JkXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUgcmVzdWx0IG9mIHRoZSBzaWduIHVwIG9wZXJhdGlvblxuICovXG5leHBvcnQgY29uc3Qgc2lnblVwID0gYXN5bmMgKGVtYWlsLCBwYXNzd29yZCkgPT4ge1xuICByZXR1cm4gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduVXAoe1xuICAgIGVtYWlsLFxuICAgIHBhc3N3b3JkLFxuICB9KTtcbn07XG5cbi8qKlxuICogU2lnbiBpbiBhIHVzZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFVzZXIncyBlbWFpbFxuICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkIC0gVXNlcidzIHBhc3N3b3JkXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUgcmVzdWx0IG9mIHRoZSBzaWduIGluIG9wZXJhdGlvblxuICovXG5leHBvcnQgY29uc3Qgc2lnbkluID0gYXN5bmMgKGVtYWlsLCBwYXNzd29yZCkgPT4ge1xuICByZXR1cm4gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoe1xuICAgIGVtYWlsLFxuICAgIHBhc3N3b3JkLFxuICB9KTtcbn07XG5cbi8qKlxuICogU2lnbiBvdXQgdGhlIGN1cnJlbnQgdXNlclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gVGhlIHJlc3VsdCBvZiB0aGUgc2lnbiBvdXQgb3BlcmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBzaWduT3V0ID0gYXN5bmMgKCkgPT4ge1xuICByZXR1cm4gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduT3V0KCk7XG59O1xuXG4vKipcbiAqIEZldGNoIHByb3BlcnRpZXMgZnJvbSBTdXBhYmFzZSB3aXRoIGVuaGFuY2VkIGVycm9yIGhhbmRsaW5nIGFuZCBkYXRhIG5vcm1hbGl6YXRpb25cbiAqIFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBRdWVyeSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5maWx0ZXJzIC0gS2V5LXZhbHVlIHBhaXJzIGZvciBmaWx0ZXJpbmcgKGUuZy4ge3N0YXR1czogJ0ZvciBTYWxlJ30pXG4gKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5wYWdlIC0gUGFnZSBudW1iZXIgZm9yIHBhZ2luYXRpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLnBhZ2VTaXplIC0gTnVtYmVyIG9mIGl0ZW1zIHBlciBwYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5zb3J0QnkgLSBGaWVsZCB0byBzb3J0IGJ5XG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuc29ydEFzYyAtIFNvcnQgaW4gYXNjZW5kaW5nIG9yZGVyIGlmIHRydWVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5pbmNsdWRlSW5jb21wbGV0ZSAtIFdoZXRoZXIgdG8gaW5jbHVkZSBwcm9wZXJ0aWVzIHdpdGggbWlzc2luZyBjb29yZGluYXRlc1xuICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLmluY2x1ZGVSZXNlYXJjaCAtIFdoZXRoZXIgdG8gaW5jbHVkZSBlbnJpY2hlZCByZXNlYXJjaCBkYXRhXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMubm9MaW1pdCAtIFdoZXRoZXIgdG8gYnlwYXNzIHBhZ2luYXRpb24gbGltaXRzIGFuZCBnZXQgYWxsIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmJvdW5kcyAtIEdlb2dyYXBoaWNhbCBib3VuZHMgdG8gZmlsdGVyIHByb3BlcnRpZXMgKG5vcnRoLCBzb3V0aCwgZWFzdCwgd2VzdClcbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gQXJyYXkgb2Ygbm9ybWFsaXplZCBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBjb25zdCBmZXRjaFByb3BlcnRpZXMgPSBhc3luYyAob3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnNvbGUubG9nKCdGZXRjaGluZyBwcm9wZXJ0aWVzIHdpdGggb3B0aW9uczonLCBKU09OLnN0cmluZ2lmeShvcHRpb25zLCBudWxsLCAyKSk7XG4gIFxuICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgam9pbiB3aXRoIHJlc2VhcmNoIGRhdGFcbiAgaWYgKG9wdGlvbnMuaW5jbHVkZVJlc2VhcmNoICE9PSBmYWxzZSkge1xuICAgIC8vIEluY2x1ZGUgcmVzZWFyY2ggZGF0YSBpbiBvdXIgcXVlcnkgLSB3ZSdsbCBqb2luIHdpdGggcHJvcGVydHlfcmVzZWFyY2ggdGFibGVcbiAgICB0cnkge1xuICAgICAgLy8gU3RhcnQgd2l0aCBhIHF1ZXJ5IHRoYXQgam9pbnMgcHJvcGVydGllcyB3aXRoIHJlc2VhcmNoIGRhdGFcbiAgICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlLmZyb20oJ3Byb3BlcnRpZXMnKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIHByb3BlcnR5X3Jlc2VhcmNoOnByb3BlcnR5X3Jlc2VhcmNoKCopXG4gICAgICAgIGApO1xuICAgICAgXG4gICAgICAvLyBBcHBseSBmaWx0ZXJzIGlmIHByb3ZpZGVkXG4gICAgICBpZiAob3B0aW9ucy5maWx0ZXJzKSB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMuZmlsdGVycykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgc3BlY2lhbCBmaWx0ZXIgc3ludGF4XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnb3InKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkub3IodmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkuZW5kc1dpdGgoJ19ndGUnKSkge1xuICAgICAgICAgICAgICBjb25zdCBhY3R1YWxLZXkgPSBrZXkucmVwbGFjZSgnX2d0ZScsICcnKTtcbiAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS5ndGUoYWN0dWFsS2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGtleS5lbmRzV2l0aCgnX2x0ZScpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGFjdHVhbEtleSA9IGtleS5yZXBsYWNlKCdfbHRlJywgJycpO1xuICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5Lmx0ZShhY3R1YWxLZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5LmVuZHNXaXRoKCdfZ3QnKSkge1xuICAgICAgICAgICAgICBjb25zdCBhY3R1YWxLZXkgPSBrZXkucmVwbGFjZSgnX2d0JywgJycpO1xuICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5Lmd0KGFjdHVhbEtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkuZW5kc1dpdGgoJ19sdCcpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGFjdHVhbEtleSA9IGtleS5yZXBsYWNlKCdfbHQnLCAnJyk7XG4gICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkubHQoYWN0dWFsS2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGtleS5lbmRzV2l0aCgnX2lsaWtlJykpIHtcbiAgICAgICAgICAgICAgY29uc3QgYWN0dWFsS2V5ID0ga2V5LnJlcGxhY2UoJ19pbGlrZScsICcnKTtcbiAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS5pbGlrZShhY3R1YWxLZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gZXF1YWxpdHkgbWF0Y2hpbmdcbiAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS5lcShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBcHBseSBnZW9ncmFwaGljYWwgYm91bmRzIGlmIHByb3ZpZGVkIHRvIGxpbWl0IHRvIHZpc2libGUgYXJlYVxuICAgICAgaWYgKG9wdGlvbnMuYm91bmRzKSB7XG4gICAgICAgIGNvbnN0IHsgbm9ydGgsIHNvdXRoLCBlYXN0LCB3ZXN0IH0gPSBvcHRpb25zLmJvdW5kcztcbiAgICAgICAgXG4gICAgICAgIGlmIChub3J0aCAmJiBzb3V0aCAmJiBlYXN0ICYmIHdlc3QpIHtcbiAgICAgICAgICAvLyBPbmx5IGdldCBwcm9wZXJ0aWVzIHdpdGhpbiB0aGUgY3VycmVudCBtYXAgYm91bmRzXG4gICAgICAgICAgcXVlcnkgPSBxdWVyeVxuICAgICAgICAgICAgLmd0ZSgnbGF0aXR1ZGUnLCBzb3V0aClcbiAgICAgICAgICAgIC5sdGUoJ2xhdGl0dWRlJywgbm9ydGgpXG4gICAgICAgICAgICAuZ3RlKCdsb25naXR1ZGUnLCB3ZXN0KVxuICAgICAgICAgICAgLmx0ZSgnbG9uZ2l0dWRlJywgZWFzdCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYEFwcGx5aW5nIGdlb2dyYXBoaWNhbCBib3VuZHMgZmlsdGVyOiBsYXQgJHtzb3V0aH0tJHtub3J0aH0sIGxuZyAke3dlc3R9LSR7ZWFzdH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJZiB3ZSBuZWVkIGNvbXBsZXRlIHByb3BlcnRpZXMgd2l0aCBjb29yZGluYXRlcyBmb3IgdGhlIG1hcFxuICAgICAgaWYgKCFvcHRpb25zLmluY2x1ZGVJbmNvbXBsZXRlKSB7XG4gICAgICAgIC8vIFVzZSBhIG1vcmUgcHJlY2lzZSBmaWx0ZXIgdG8gYXZvaWQgZW1wdHkvemVybyBjb29yZGluYXRlc1xuICAgICAgICAvLyBGaXJzdCBwcmlvcml0aXplIHByb3BlcnRpZXMgd2l0aCB2YWxpZCBjb29yZGluYXRlcyAoZWl0aGVyIGRpcmVjdCBvciBmcm9tIHJlc2VhcmNoKVxuICAgICAgICBxdWVyeSA9IHF1ZXJ5XG4gICAgICAgICAgLm5vdCgnbGF0aXR1ZGUnLCAnaXMnLCBudWxsKVxuICAgICAgICAgIC5ub3QoJ2xvbmdpdHVkZScsICdpcycsIG51bGwpXG4gICAgICAgICAgLm5vdCgnbGF0aXR1ZGUnLCAnZXEnLCAwKVxuICAgICAgICAgIC5ub3QoJ2xvbmdpdHVkZScsICdlcScsIDApXG4gICAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ1F1ZXJ5aW5nIGZvciBwcm9wZXJ0aWVzIHdpdGggdmFsaWQgY29vcmRpbmF0ZXMgb25seScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0luY2x1ZGluZyBhbGwgcHJvcGVydGllcyByZWdhcmRsZXNzIG9mIGNvb3JkaW5hdGVzJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IHBhZ2luYXRpb24gdW5sZXNzIG5vTGltaXQgaXMgc2V0IHRvIHRydWVcbiAgICAgIGlmICghb3B0aW9ucy5ub0xpbWl0ICYmIG9wdGlvbnMucGFnZSAmJiBvcHRpb25zLnBhZ2VTaXplKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gKG9wdGlvbnMucGFnZSAtIDEpICogb3B0aW9ucy5wYWdlU2l6ZTtcbiAgICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyBvcHRpb25zLnBhZ2VTaXplIC0gMTtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5yYW5nZShzdGFydCwgZW5kKTtcbiAgICAgICAgY29uc29sZS5sb2coYEFwcGx5aW5nIHBhZ2luYXRpb246IHJhbmdlICR7c3RhcnR9LSR7ZW5kfWApO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLm5vTGltaXQpIHtcbiAgICAgICAgLy8gV2hlbiBsb2FkaW5nIGFsbCBwcm9wZXJ0aWVzLCB3ZSdsbCBsaW1pdCB0byAyNTAwIG1heCBmb3IgcGVyZm9ybWFuY2VcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgZW5vdWdoIGZvciB0aGUgZW50aXJlIGRhdGFzZXRcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5saW1pdCgyNTAwKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRpbmcgdXAgdG8gMjUwMCBwcm9wZXJ0aWVzIChieXBhc3NpbmcgcGFnaW5hdGlvbiknKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQXBwbHkgc29ydGluZ1xuICAgICAgaWYgKG9wdGlvbnMuc29ydEJ5KSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIob3B0aW9ucy5zb3J0QnksIHsgYXNjZW5kaW5nOiBvcHRpb25zLnNvcnRBc2MgIT09IGZhbHNlIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBFeGVjdXRlIHF1ZXJ5XG4gICAgICBjb25zb2xlLmxvZygnRXhlY3V0aW5nIFN1cGFiYXNlIHF1ZXJ5Li4uJyk7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIC8vIElmIHRoaXMgZmFpbHMsIHdlJ2xsIGZhbGwgYmFjayB0byB0aGUgbm9uLWpvaW4gcXVlcnlcbiAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBmZXRjaGluZyBwcm9wZXJ0aWVzIHdpdGggcmVzZWFyY2ggam9pbjonLCBlcnJvcik7XG4gICAgICAgIC8vIENvbnRpbnVlIHRvIGZhbGxiYWNrIHF1ZXJ5IGJlbG93XG4gICAgICB9IGVsc2UgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke2RhdGEubGVuZ3RofSBwcm9wZXJ0aWVzIHdpdGggcmVzZWFyY2ggZGF0YWApO1xuICAgICAgICBcbiAgICAgICAgLy8gTWVyZ2UgcmVzZWFyY2ggZGF0YSB3aXRoIHByb3BlcnR5IGRhdGFcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFByb3BlcnRpZXMgPSBkYXRhLm1hcChwcm9wZXJ0eSA9PiB7XG4gICAgICAgICAgLy8gRXh0cmFjdCByZXNlYXJjaCBkYXRhIGlmIGF2YWlsYWJsZVxuICAgICAgICAgIGNvbnN0IHJlc2VhcmNoRGF0YSA9IHByb3BlcnR5LnByb3BlcnR5X3Jlc2VhcmNoICYmIHByb3BlcnR5LnByb3BlcnR5X3Jlc2VhcmNoLmxlbmd0aCA+IDAgXG4gICAgICAgICAgICA/IHByb3BlcnR5LnByb3BlcnR5X3Jlc2VhcmNoWzBdIFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIERlbGV0ZSB0aGUgbmVzdGVkIHByb3BlcnR5X3Jlc2VhcmNoIHRvIGF2b2lkIGNvbmZ1c2lvblxuICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0eS5wcm9wZXJ0eV9yZXNlYXJjaDtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBOb3JtYWxpemUgdGhlIHByb3BlcnR5XG4gICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFByb3BlcnR5ID0gbm9ybWFsaXplUHJvcGVydHkocHJvcGVydHkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIHdlIGhhdmUgcmVzZWFyY2ggZGF0YSB3aXRoIHZhbGlkIGNvb3JkaW5hdGVzLCB1c2UgdGhlbVxuICAgICAgICAgIGlmIChyZXNlYXJjaERhdGEgJiYgcmVzZWFyY2hEYXRhLm1vZHVsZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vIENoZWNrIGZvciB2YWxpZCBjb29yZGluYXRlcyBpbiBwcm9wZXJ0eV9kZXRhaWxzIG1vZHVsZVxuICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eURldGFpbHMgPSByZXNlYXJjaERhdGEubW9kdWxlcy5wcm9wZXJ0eV9kZXRhaWxzIHx8IHt9O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gT25seSB1c2UgcmVzZWFyY2ggY29vcmRpbmF0ZXMgaWYgdGhleSdyZSB2YWxpZCBhbmQgcHJvcGVydHkgZG9lc24ndCBoYXZlIHRoZW1cbiAgICAgICAgICAgICAgaWYgKHByb3BlcnR5RGV0YWlscy5sYXRpdHVkZSAmJiBwcm9wZXJ0eURldGFpbHMubG9uZ2l0dWRlICYmXG4gICAgICAgICAgICAgICAgICB0eXBlb2YgcHJvcGVydHlEZXRhaWxzLmxhdGl0dWRlID09PSAnbnVtYmVyJyAmJiBcbiAgICAgICAgICAgICAgICAgIHR5cGVvZiBwcm9wZXJ0eURldGFpbHMubG9uZ2l0dWRlID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgICAgIW5vcm1hbGl6ZWRQcm9wZXJ0eS5faXNfZ3JpZF9wYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5LmxhdGl0dWRlID0gcHJvcGVydHlEZXRhaWxzLmxhdGl0dWRlO1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRQcm9wZXJ0eS5sb25naXR1ZGUgPSBwcm9wZXJ0eURldGFpbHMubG9uZ2l0dWRlO1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRQcm9wZXJ0eS5fY29vcmRpbmF0ZXNfZnJvbV9yZXNlYXJjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5Ll9jb29yZGluYXRlc19taXNzaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5Ll9uZWVkc19nZW9jb2RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVXNpbmcgcmVzZWFyY2ggY29vcmRpbmF0ZXMgZm9yIHByb3BlcnR5ICR7cHJvcGVydHkuaWR9OiBbJHtwcm9wZXJ0eURldGFpbHMubGF0aXR1ZGV9LCAke3Byb3BlcnR5RGV0YWlscy5sb25naXR1ZGV9XWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBZGQgcmVzZWFyY2ggZGF0YSB0byBwcm9wZXJ0eVxuICAgICAgICAgICAgICBub3JtYWxpemVkUHJvcGVydHkuX3Jlc2VhcmNoID0ge1xuICAgICAgICAgICAgICAgIGRlcHRoOiByZXNlYXJjaERhdGEucmVzZWFyY2hfZGVwdGgsXG4gICAgICAgICAgICAgICAgZGF0ZTogcmVzZWFyY2hEYXRhLnJlc2VhcmNoX2RhdGUsXG4gICAgICAgICAgICAgICAgc3VtbWFyeTogcmVzZWFyY2hEYXRhLmV4ZWN1dGl2ZV9zdW1tYXJ5XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgcmVzZWFyY2ggZGF0YTonLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRQcm9wZXJ0eTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGb3IgbWFwIHZpZXcsIGZpbHRlciBvdXQgcHJvcGVydGllcyB3aXRob3V0IHZhbGlkIGNvb3JkaW5hdGVzXG4gICAgICAgIGlmICghb3B0aW9ucy5pbmNsdWRlSW5jb21wbGV0ZSkge1xuICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNXaXRoQ29vcmRpbmF0ZXMgPSBub3JtYWxpemVkUHJvcGVydGllcy5maWx0ZXIoXG4gICAgICAgICAgICBwID0+IHAubGF0aXR1ZGUgJiYgcC5sb25naXR1ZGUgJiYgXG4gICAgICAgICAgICAgICAgKHAuX2Nvb3JkaW5hdGVzX2Zyb21fcmVzZWFyY2ggfHwgXG4gICAgICAgICAgICAgICAgICAoIXAuX2Nvb3JkaW5hdGVzX21pc3NpbmcgJiYgIXAuX2lzX2dyaWRfcGF0dGVybikpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRmlsdGVyZWQgdG8gJHtwcm9wZXJ0aWVzV2l0aENvb3JkaW5hdGVzLmxlbmd0aH0gcHJvcGVydGllcyB3aXRoIHZhbGlkIGNvb3JkaW5hdGVzYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHByb3BlcnRpZXNXaXRoQ29vcmRpbmF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXNXaXRoQ29vcmRpbmF0ZXM7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIGFsbCBwcm9wZXJ0aWVzIHdlcmUgZmlsdGVyZWQgb3V0LCByZXR1cm4gdGhlbSBhbnl3YXkgdG8gYXZvaWQgZW1wdHkgbWFwXG4gICAgICAgICAgY29uc29sZS53YXJuKCdBbGwgcHJvcGVydGllcyB3ZXJlIGZpbHRlcmVkIG91dCBmb3IgaGF2aW5nIGludmFsaWQgY29vcmRpbmF0ZXMnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRQcm9wZXJ0aWVzO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGpvaW5FcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2l0aCByZXNlYXJjaCBqb2luIHF1ZXJ5OicsIGpvaW5FcnJvcik7XG4gICAgICAvLyBGYWxsIGJhY2sgdG8gc3RhbmRhcmQgcXVlcnlcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrIC0gc3RhbmRhcmQgcXVlcnkgd2l0aG91dCByZXNlYXJjaCBkYXRhXG4gIGNvbnNvbGUubG9nKCdVc2luZyBzdGFuZGFyZCBwcm9wZXJ0eSBxdWVyeSB3aXRob3V0IHJlc2VhcmNoIGRhdGEnKTtcbiAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2UuZnJvbSgncHJvcGVydGllcycpLnNlbGVjdCgnKicpO1xuICBcbiAgLy8gQXBwbHkgZmlsdGVycyBpZiBwcm92aWRlZFxuICBpZiAob3B0aW9ucy5maWx0ZXJzKSB7XG4gICAgT2JqZWN0LmVudHJpZXMob3B0aW9ucy5maWx0ZXJzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSAnJykge1xuICAgICAgICAvLyBIYW5kbGUgc3BlY2lhbCBmaWx0ZXIgc3ludGF4XG4gICAgICAgIGlmIChrZXkgPT09ICdvcicpIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkuZW5kc1dpdGgoJ19ndGUnKSkge1xuICAgICAgICAgIGNvbnN0IGFjdHVhbEtleSA9IGtleS5yZXBsYWNlKCdfZ3RlJywgJycpO1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkuZ3RlKGFjdHVhbEtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleS5lbmRzV2l0aCgnX2x0ZScpKSB7XG4gICAgICAgICAgY29uc3QgYWN0dWFsS2V5ID0ga2V5LnJlcGxhY2UoJ19sdGUnLCAnJyk7XG4gICAgICAgICAgcXVlcnkgPSBxdWVyeS5sdGUoYWN0dWFsS2V5LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5LmVuZHNXaXRoKCdfZ3QnKSkge1xuICAgICAgICAgIGNvbnN0IGFjdHVhbEtleSA9IGtleS5yZXBsYWNlKCdfZ3QnLCAnJyk7XG4gICAgICAgICAgcXVlcnkgPSBxdWVyeS5ndChhY3R1YWxLZXksIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkuZW5kc1dpdGgoJ19sdCcpKSB7XG4gICAgICAgICAgY29uc3QgYWN0dWFsS2V5ID0ga2V5LnJlcGxhY2UoJ19sdCcsICcnKTtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5Lmx0KGFjdHVhbEtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleS5lbmRzV2l0aCgnX2lsaWtlJykpIHtcbiAgICAgICAgICBjb25zdCBhY3R1YWxLZXkgPSBrZXkucmVwbGFjZSgnX2lsaWtlJywgJycpO1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkuaWxpa2UoYWN0dWFsS2V5LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRGVmYXVsdCB0byBlcXVhbGl0eSBtYXRjaGluZ1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgLy8gQXBwbHkgZ2VvZ3JhcGhpY2FsIGJvdW5kcyBpZiBwcm92aWRlZFxuICBpZiAob3B0aW9ucy5ib3VuZHMpIHtcbiAgICBjb25zdCB7IG5vcnRoLCBzb3V0aCwgZWFzdCwgd2VzdCB9ID0gb3B0aW9ucy5ib3VuZHM7XG4gICAgXG4gICAgaWYgKG5vcnRoICYmIHNvdXRoICYmIGVhc3QgJiYgd2VzdCkge1xuICAgICAgLy8gT25seSBnZXQgcHJvcGVydGllcyB3aXRoaW4gdGhlIGN1cnJlbnQgbWFwIGJvdW5kc1xuICAgICAgcXVlcnkgPSBxdWVyeVxuICAgICAgICAuZ3RlKCdsYXRpdHVkZScsIHNvdXRoKVxuICAgICAgICAubHRlKCdsYXRpdHVkZScsIG5vcnRoKVxuICAgICAgICAuZ3RlKCdsb25naXR1ZGUnLCB3ZXN0KVxuICAgICAgICAubHRlKCdsb25naXR1ZGUnLCBlYXN0KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYEFwcGx5aW5nIGdlb2dyYXBoaWNhbCBib3VuZHMgZmlsdGVyOiBsYXQgJHtzb3V0aH0tJHtub3J0aH0sIGxuZyAke3dlc3R9LSR7ZWFzdH1gKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIElmIHdlIG5lZWQgY29tcGxldGUgcHJvcGVydGllcyB3aXRoIGNvb3JkaW5hdGVzIGZvciB0aGUgbWFwXG4gIGlmICghb3B0aW9ucy5pbmNsdWRlSW5jb21wbGV0ZSkge1xuICAgIC8vIFVzZSBhIG1vcmUgcHJlY2lzZSBmaWx0ZXIgdG8gYXZvaWQgZW1wdHkvemVybyBjb29yZGluYXRlc1xuICAgIC8vIEZpcnN0IHByaW9yaXRpemUgcHJvcGVydGllcyB3aXRoIHZhbGlkIGNvb3JkaW5hdGVzIChlaXRoZXIgZGlyZWN0IG9yIGZyb20gcmVzZWFyY2gpXG4gICAgcXVlcnkgPSBxdWVyeVxuICAgICAgLm5vdCgnbGF0aXR1ZGUnLCAnaXMnLCBudWxsKVxuICAgICAgLm5vdCgnbG9uZ2l0dWRlJywgJ2lzJywgbnVsbClcbiAgICAgIC5ub3QoJ2xhdGl0dWRlJywgJ2VxJywgMClcbiAgICAgIC5ub3QoJ2xvbmdpdHVkZScsICdlcScsIDApXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1F1ZXJ5aW5nIGZvciBwcm9wZXJ0aWVzIHdpdGggdmFsaWQgY29vcmRpbmF0ZXMgb25seScpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdJbmNsdWRpbmcgYWxsIHByb3BlcnRpZXMgcmVnYXJkbGVzcyBvZiBjb29yZGluYXRlcycpO1xuICB9XG4gIFxuICAvLyBBcHBseSBwYWdpbmF0aW9uIHVubGVzcyBub0xpbWl0IGlzIHNldCB0byB0cnVlXG4gIGlmICghb3B0aW9ucy5ub0xpbWl0ICYmIG9wdGlvbnMucGFnZSAmJiBvcHRpb25zLnBhZ2VTaXplKSB7XG4gICAgY29uc3Qgc3RhcnQgPSAob3B0aW9ucy5wYWdlIC0gMSkgKiBvcHRpb25zLnBhZ2VTaXplO1xuICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgb3B0aW9ucy5wYWdlU2l6ZSAtIDE7XG4gICAgcXVlcnkgPSBxdWVyeS5yYW5nZShzdGFydCwgZW5kKTtcbiAgICBjb25zb2xlLmxvZyhgQXBwbHlpbmcgcGFnaW5hdGlvbjogcmFuZ2UgJHtzdGFydH0tJHtlbmR9YCk7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5ub0xpbWl0KSB7XG4gICAgLy8gV2hlbiBsb2FkaW5nIGFsbCBwcm9wZXJ0aWVzLCB3ZSdsbCBsaW1pdCB0byAyNTAwIG1heCBmb3IgcGVyZm9ybWFuY2VcbiAgICAvLyBUaGlzIHNob3VsZCBiZSBlbm91Z2ggZm9yIHRoZSBlbnRpcmUgZGF0YXNldFxuICAgIHF1ZXJ5ID0gcXVlcnkubGltaXQoMjUwMCk7XG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgdXAgdG8gMjUwMCBwcm9wZXJ0aWVzIChieXBhc3NpbmcgcGFnaW5hdGlvbiknKTtcbiAgfVxuICBcbiAgLy8gQXBwbHkgc29ydGluZ1xuICBpZiAob3B0aW9ucy5zb3J0QnkpIHtcbiAgICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKG9wdGlvbnMuc29ydEJ5LCB7IGFzY2VuZGluZzogb3B0aW9ucy5zb3J0QXNjICE9PSBmYWxzZSB9KTtcbiAgfVxuICBcbiAgLy8gRXhlY3V0ZSBxdWVyeVxuICBjb25zb2xlLmxvZygnRXhlY3V0aW5nIFN1cGFiYXNlIHF1ZXJ5Li4uJyk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJvcGVydGllczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgXG4gIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnNvbGUud2FybignTm8gcHJvcGVydGllcyBmb3VuZCB3aXRoIHRoZSBnaXZlbiBjcml0ZXJpYScpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBcbiAgY29uc29sZS5sb2coYEZldGNoZWQgJHtkYXRhLmxlbmd0aH0gcHJvcGVydGllcyBzdWNjZXNzZnVsbHlgKTtcbiAgXG4gIC8vIE5vcm1hbGl6ZSBwcm9wZXJ0eSBkYXRhIHRvIGhhbmRsZSBpbmNvbnNpc3RlbmNpZXNcbiAgcmV0dXJuIGRhdGEubWFwKHByb3BlcnR5ID0+IG5vcm1hbGl6ZVByb3BlcnR5KHByb3BlcnR5KSk7XG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZXMgcHJvcGVydHkgZGF0YSB0byBoYW5kbGUgaW5jb25zaXN0ZW50IGZpZWxkIG5hbWVzXG4gKiBcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0eSAtIFJhdyBwcm9wZXJ0eSBkYXRhIGZyb20gU3VwYWJhc2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IE5vcm1hbGl6ZWQgcHJvcGVydHkgZGF0YVxuICovXG5jb25zdCBub3JtYWxpemVQcm9wZXJ0eSA9IChwcm9wZXJ0eSkgPT4ge1xuICAvLyBNYWtlIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB7IC4uLnByb3BlcnR5IH07XG4gIFxuICAvLyBIYW5kbGUgaW5jb25zaXN0ZW50IHVuaXQgZmllbGQgbmFtZXNcbiAgbm9ybWFsaXplZC51bml0cyA9IHByb3BlcnR5Lm51bV91bml0cyB8fCBwcm9wZXJ0eS51bml0cyB8fCBudWxsO1xuICBcbiAgLy8gVXNlIHByb3BlcnR5IG5hbWUgb3IgZGVyaXZlIGZyb20gYWRkcmVzcyBpZiBtaXNzaW5nXG4gIGlmICghbm9ybWFsaXplZC5uYW1lIHx8IG5vcm1hbGl6ZWQubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgbm9ybWFsaXplZC5uYW1lID0gcHJvcGVydHkuYWRkcmVzcyBcbiAgICAgID8gYFByb3BlcnR5IGF0ICR7cHJvcGVydHkuYWRkcmVzcy5zcGxpdCgnLCcpWzBdfWBcbiAgICAgIDogYFByb3BlcnR5ICR7cHJvcGVydHkuaWQuc3Vic3RyaW5nKDAsIDgpfWA7XG4gIH1cbiAgXG4gIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIHN0YXR1c1xuICBub3JtYWxpemVkLnN0YXR1cyA9IHByb3BlcnR5LnN0YXR1cyB8fCBwcm9wZXJ0eS5wcm9wZXJ0eV9zdGF0dXMgfHwgJ0xpc3RlZCc7XG4gIFxuICAvLyBDaGVjayBpZiB0aGlzIGlzIGxpa2VseSBhIHRlc3QgcHJvcGVydHlcbiAgbm9ybWFsaXplZC5faXNfdGVzdF9wcm9wZXJ0eSA9IGlzVGVzdFByb3BlcnR5KHByb3BlcnR5KTtcbiAgXG4gIC8vIEFkZCBjb29yZGluYXRlIHJlbGF0ZWQgZmxhZ3NcbiAgaWYgKHByb3BlcnR5LmxhdGl0dWRlICYmIHByb3BlcnR5LmxvbmdpdHVkZSAmJlxuICAgICAgdHlwZW9mIHByb3BlcnR5LmxhdGl0dWRlID09PSAnbnVtYmVyJyAmJiBcbiAgICAgIHR5cGVvZiBwcm9wZXJ0eS5sb25naXR1ZGUgPT09ICdudW1iZXInICYmXG4gICAgICAhKHByb3BlcnR5LmxhdGl0dWRlID09PSAwICYmIHByb3BlcnR5LmxvbmdpdHVkZSA9PT0gMCkpIHtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBjb29yZGluYXRlcyBhcmUgdmFsaWQgKGluIHByb3BlciBsYXQvbG9uZyByYW5nZXMpXG4gICAgY29uc3QgaXNWYWxpZExhdGl0dWRlID0gcHJvcGVydHkubGF0aXR1ZGUgPj0gLTkwICYmIHByb3BlcnR5LmxhdGl0dWRlIDw9IDkwO1xuICAgIGNvbnN0IGlzVmFsaWRMb25naXR1ZGUgPSBwcm9wZXJ0eS5sb25naXR1ZGUgPj0gLTE4MCAmJiBwcm9wZXJ0eS5sb25naXR1ZGUgPD0gMTgwO1xuICAgIFxuICAgIC8vIEF1c3RpbiBhcmVhIGJvdW5kYXJpZXMgKGFwcHJveGltYXRlKSAtIGhlbHBzIGRldGVjdCBvYnZpb3VzbHkgd3JvbmcgY29vcmRpbmF0ZXNcbiAgICBjb25zdCBpc0luQXVzdGluQXJlYSA9IChcbiAgICAgIHByb3BlcnR5LmxhdGl0dWRlID49IDI5LjUgJiYgcHJvcGVydHkubGF0aXR1ZGUgPD0gMzEuMCAmJiBcbiAgICAgIHByb3BlcnR5LmxvbmdpdHVkZSA+PSAtOTguMCAmJiBwcm9wZXJ0eS5sb25naXR1ZGUgPD0gLTk3LjBcbiAgICApO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIGNvb3JkaW5hdGVzIGFyZSBwYXJ0IG9mIGEgZ3JpZCBwYXR0ZXJuIChsb3cgcHJlY2lzaW9uIG9yIHN1c3BpY2lvdXMgcGF0dGVybnMpXG4gICAgY29uc3QgbGF0U3RyID0gU3RyaW5nKHByb3BlcnR5LmxhdGl0dWRlKTtcbiAgICBjb25zdCBsbmdTdHIgPSBTdHJpbmcocHJvcGVydHkubG9uZ2l0dWRlKTtcbiAgICBcbiAgICAvLyBPbmx5IGZsYWcgdmVyeSBsb3cgcHJlY2lzaW9uIGNvb3JkaW5hdGVzIGFzIHN1c3BpY2lvdXMgKDEgZGVjaW1hbCBwbGFjZSBvciBsZXNzKVxuICAgIGNvbnN0IGhhc0xvd1ByZWNpc2lvbiA9IFxuICAgICAgKGxhdFN0ci5pbmNsdWRlcygnLicpICYmIGxhdFN0ci5zcGxpdCgnLicpWzFdLmxlbmd0aCA8PSAxKSB8fFxuICAgICAgKGxuZ1N0ci5pbmNsdWRlcygnLicpICYmIGxuZ1N0ci5zcGxpdCgnLicpWzFdLmxlbmd0aCA8PSAxKTtcbiAgICAgIFxuICAgIC8vIFJlZHVjZWQgc2V0IG9mIHN1c3BpY2lvdXMgcGF0dGVybnNcbiAgICBjb25zdCBoYXNTdXNwaWNpb3VzUGF0dGVybiA9IFxuICAgICAgbGF0U3RyID09PSBsbmdTdHIgfHwgLy8gU2FtZSBsYXQvbG5nIGlzIHZlcnkgdW5saWtlbHlcbiAgICAgIGxhdFN0ci5lbmRzV2l0aCgnMDAwMDAnKSB8fCBcbiAgICAgIGxuZ1N0ci5lbmRzV2l0aCgnMDAwMDAnKTtcbiAgICBcbiAgICAvLyBLZWVwIHRyYWNrIG9mIHdoZXRoZXIgdGhpcyBpcyBkZXRlY3RlZCBhcyBhIGdyaWQgcGF0dGVyblxuICAgIGNvbnN0IGlzR3JpZFBhdHRlcm4gPSBoYXNMb3dQcmVjaXNpb24gfHwgaGFzU3VzcGljaW91c1BhdHRlcm47XG4gICAgXG4gICAgLy8gRmxhZyBjb29yZGluYXRlcyBhcyBtaXNzaW5nIGlmIHRoZXkncmUgaW52YWxpZCBvciBzdXNwaWNpb3VzXG4gICAgaWYgKCFpc1ZhbGlkTGF0aXR1ZGUgfHwgIWlzVmFsaWRMb25naXR1ZGUgfHwgaXNHcmlkUGF0dGVybikge1xuICAgICAgbm9ybWFsaXplZC5fY29vcmRpbmF0ZXNfbWlzc2luZyA9IHRydWU7XG4gICAgICBub3JtYWxpemVkLl9uZWVkc19nZW9jb2RpbmcgPSB0cnVlO1xuICAgICAgbm9ybWFsaXplZC5faXNfZ3JpZF9wYXR0ZXJuID0gaXNHcmlkUGF0dGVybjtcbiAgICAgIG5vcm1hbGl6ZWQuX2lzX2ludmFsaWRfcmFuZ2UgPSAhaXNWYWxpZExhdGl0dWRlIHx8ICFpc1ZhbGlkTG9uZ2l0dWRlO1xuICAgICAgXG4gICAgICAvLyBEZWJ1ZyBpbmZvIGZvciBpbnZhbGlkIGNvb3JkaW5hdGVzXG4gICAgICBpZiAoIWlzVmFsaWRMYXRpdHVkZSB8fCAhaXNWYWxpZExvbmdpdHVkZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgY29vcmRpbmF0ZSByYW5nZSBmb3IgcHJvcGVydHkgJHtwcm9wZXJ0eS5pZH06IFske3Byb3BlcnR5LmxhdGl0dWRlfSwgJHtwcm9wZXJ0eS5sb25naXR1ZGV9XWApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZXQgYWRkaXRpb25hbCBmbGFncyBmb3IgY29vcmRpbmF0ZXMgb3V0c2lkZSBBdXN0aW4gKG1pZ2h0IGJlIHZhbGlkIGJ1dCBzdXNwaWNpb3VzKVxuICAgICAgbm9ybWFsaXplZC5fb3V0c2lkZV9hdXN0aW4gPSAhaXNJbkF1c3RpbkFyZWE7XG4gICAgICBub3JtYWxpemVkLl9jb29yZGluYXRlc19taXNzaW5nID0gZmFsc2U7XG4gICAgICBub3JtYWxpemVkLl9uZWVkc19nZW9jb2RpbmcgPSBmYWxzZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gTm8gY29vcmRpbmF0ZXMgb3IgaW52YWxpZCBjb29yZGluYXRlc1xuICAgIG5vcm1hbGl6ZWQuX2Nvb3JkaW5hdGVzX21pc3NpbmcgPSB0cnVlO1xuICAgIG5vcm1hbGl6ZWQuX25lZWRzX2dlb2NvZGluZyA9IHRydWU7XG4gIH1cbiAgXG4gIHJldHVybiBub3JtYWxpemVkO1xufTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgcHJvcGVydHkgaXMgbGlrZWx5IGEgdGVzdC9leGFtcGxlIHByb3BlcnR5XG4gKiBcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0eSAtIFByb3BlcnR5IGRhdGEgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHByb3BlcnR5IGlzIGxpa2VseSBhIHRlc3QgcHJvcGVydHlcbiAqL1xuY29uc3QgaXNUZXN0UHJvcGVydHkgPSAocHJvcGVydHkpID0+IHtcbiAgLy8gQ2hlY2sgZm9yIGNvbW1vbiB0ZXN0IHByb3BlcnR5IGluZGljYXRvcnMgaW4gbmFtZVxuICBjb25zdCBuYW1lID0gKHByb3BlcnR5Lm5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHRlc3RJbmRpY2F0b3JzID0gWyd0ZXN0JywgJ2V4YW1wbGUnLCAnc2FtcGxlJywgJ2RlbW8nLCAnZHVtbXknLCAndGVtcGxhdGUnXTtcbiAgXG4gIGZvciAoY29uc3QgaW5kaWNhdG9yIG9mIHRlc3RJbmRpY2F0b3JzKSB7XG4gICAgaWYgKG5hbWUuaW5jbHVkZXMoaW5kaWNhdG9yKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIFxuICAvLyBDaGVjayBmb3IgdW5yZWFsaXN0aWMgdmFsdWVzXG4gIGlmIChwcm9wZXJ0eS5wcmljZSA9PT0gMCB8fCBwcm9wZXJ0eS5wcmljZSA9PT0gMSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIFxuICBpZiAocHJvcGVydHkudW5pdHMgPT09IDAgfHwgcHJvcGVydHkudW5pdHMgPT09IDk5OSB8fCBwcm9wZXJ0eS5udW1fdW5pdHMgPT09IDAgfHwgcHJvcGVydHkubnVtX3VuaXRzID09PSA5OTkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgLy8gQ2hlY2sgZm9yIHBsYWNlaG9sZGVyIGFkZHJlc3Nlc1xuICBjb25zdCBhZGRyZXNzID0gKHByb3BlcnR5LmFkZHJlc3MgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHBsYWNlaG9sZGVySW5kaWNhdG9ycyA9IFsnMTIzIG1haW4nLCAndGVzdCBhZGRyZXNzJywgJ2V4YW1wbGUnLCAncGxhY2Vob2xkZXInXTtcbiAgXG4gIGZvciAoY29uc3QgaW5kaWNhdG9yIG9mIHBsYWNlaG9sZGVySW5kaWNhdG9ycykge1xuICAgIGlmIChhZGRyZXNzLmluY2x1ZGVzKGluZGljYXRvcikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgdGVzdCBwcm9wZXJ0eSBpbiB0aGUgZGF0YWJhc2UgZm9yIHRlc3RpbmcgcHVycG9zZXNcbiAqIFVzZSB0aGlzIHRvIHZlcmlmeSB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbiBpcyB3b3JraW5nXG4gKiBcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IFRoZSBjcmVhdGVkIHRlc3QgcHJvcGVydHlcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVRlc3RQcm9wZXJ0eSA9IGFzeW5jICgpID0+IHtcbiAgLy8gRmlyc3QsIGNoZWNrIGlmIHdlIGNhbiBnZXQgdGhlIHRhYmxlIHN0cnVjdHVyZVxuICB0cnkge1xuICAgIC8vIFRyeSB0byBnZXQgb25lIHJlY29yZCB0byBzZWUgdGhlIHNjaGVtYVxuICAgIGNvbnN0IHsgZGF0YTogc2FtcGxlUHJvcGVydHksIGVycm9yOiBzYW1wbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9wZXJ0aWVzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmxpbWl0KDEpO1xuICAgIFxuICAgIC8vIEJhc2ljIHRlc3QgcHJvcGVydHkgdGhhdCBtYXRjaGVzIHRoZSBzY2hlbWEgZnJvbSBzdXBhYmFzZS1zZXR1cC5tZFxuICAgIGNvbnN0IGJhc2VUZXN0UHJvcGVydHkgPSB7XG4gICAgICBuYW1lOiBgVGVzdCBQcm9wZXJ0eSAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxNil9YCxcbiAgICAgIGFkZHJlc3M6ICcxMjMgVGVzdCBTdHJlZXQnLFxuICAgICAgY2l0eTogJ0F1c3RpbicsXG4gICAgICBzdGF0ZTogJ1RYJyxcbiAgICAgIHppcF9jb2RlOiAnNzg3MDEnLFxuICAgICAgbGF0aXR1ZGU6IDMwLjI2NzIsXG4gICAgICBsb25naXR1ZGU6IC05Ny43NDMxLFxuICAgICAgcHJpY2U6IDUwMDAwMDAsXG4gICAgICB1bml0czogNTAsXG4gICAgICB5ZWFyX2J1aWx0OiAyMDEwLFxuICAgICAgcHJvcGVydHlfdHlwZTogJ01VTFRJRkFNSUxZJyxcbiAgICAgIHN0YXR1czogJ2F2YWlsYWJsZScsIC8vIFVzZSBzdGF0dXMgcmF0aGVyIHRoYW4gcHJvcGVydHlfc3RhdHVzIGZyb20gdGhlIGRvY3NcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhpcyBpcyBhIHRlc3QgcHJvcGVydHkgY3JlYXRlZCB0byB2ZXJpZnkgZGF0YWJhc2UgY29ubmVjdGl2aXR5LicsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIC8vIElmIHdlIGhhdmUgYSBzYW1wbGUsIGFkYXB0IHRvIGl0cyBzY2hlbWFcbiAgICBsZXQgdGVzdFByb3BlcnR5ID0gYmFzZVRlc3RQcm9wZXJ0eTtcbiAgICBpZiAoIXNhbXBsZUVycm9yICYmIHNhbXBsZVByb3BlcnR5ICYmIHNhbXBsZVByb3BlcnR5Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBleGlzdGluZyBwcm9wZXJ0eSBmb3Igc2NoZW1hIHJlZmVyZW5jZTonLCBzYW1wbGVQcm9wZXJ0eVswXSk7XG4gICAgICBcbiAgICAgIC8vIEFkYXB0IG91ciB0ZXN0IHByb3BlcnR5IHRvIG1hdGNoIHRoZSBleGlzdGluZyBzY2hlbWFcbiAgICAgIGNvbnN0IHNhbXBsZSA9IHNhbXBsZVByb3BlcnR5WzBdO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgb2JqZWN0IHdpdGggb25seSB0aGUgZmllbGRzIHRoYXQgZXhpc3QgaW4gdGhlIHNhbXBsZVxuICAgICAgY29uc3QgYWRhcHRlZFByb3BlcnR5ID0ge307XG4gICAgICBPYmplY3Qua2V5cyhiYXNlVGVzdFByb3BlcnR5KS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIC8vIElmIHRoZSBmaWVsZCBleGlzdHMgaW4gdGhlIHNhbXBsZSwgdXNlIG91ciB0ZXN0IHZhbHVlXG4gICAgICAgIGlmIChrZXkgaW4gc2FtcGxlKSB7XG4gICAgICAgICAgYWRhcHRlZFByb3BlcnR5W2tleV0gPSBiYXNlVGVzdFByb3BlcnR5W2tleV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBrZXkgZmllbGRzIHRoYXQgbWlnaHQgaGF2ZSBkaWZmZXJlbnQgbmFtZXNcbiAgICAgIGlmICgncHJvcGVydHlfc3RhdHVzJyBpbiBzYW1wbGUgJiYgISgnc3RhdHVzJyBpbiBzYW1wbGUpKSB7XG4gICAgICAgIGFkYXB0ZWRQcm9wZXJ0eS5wcm9wZXJ0eV9zdGF0dXMgPSBiYXNlVGVzdFByb3BlcnR5LnN0YXR1cztcbiAgICAgICAgZGVsZXRlIGFkYXB0ZWRQcm9wZXJ0eS5zdGF0dXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICgnbnVtX3VuaXRzJyBpbiBzYW1wbGUgJiYgISgndW5pdHMnIGluIHNhbXBsZSkpIHtcbiAgICAgICAgYWRhcHRlZFByb3BlcnR5Lm51bV91bml0cyA9IGJhc2VUZXN0UHJvcGVydHkudW5pdHM7XG4gICAgICAgIGRlbGV0ZSBhZGFwdGVkUHJvcGVydHkudW5pdHM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVzZSB0aGUgYWRhcHRlZCBwcm9wZXJ0eVxuICAgICAgdGVzdFByb3BlcnR5ID0gYWRhcHRlZFByb3BlcnR5O1xuICAgICAgY29uc29sZS5sb2coJ0FkYXB0ZWQgdGVzdCBwcm9wZXJ0eSB0byBtYXRjaCBzY2hlbWE6JywgdGVzdFByb3BlcnR5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ05vIHNhbXBsZSBwcm9wZXJ0eSBmb3VuZCwgdXNpbmcgZGVmYXVsdCBzY2hlbWEnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJ5IHRvIGluc2VydCB0aGUgdGVzdCBwcm9wZXJ0eVxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvcGVydGllcycpXG4gICAgICAuaW5zZXJ0KHRlc3RQcm9wZXJ0eSlcbiAgICAgIC5zZWxlY3QoKTtcbiAgICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdGVzdCBwcm9wZXJ0eTonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIFRyeSBhZ2FpbiB3aXRoIG1pbmltYWwgZmllbGRzIGlmIHRoaXMgZmFpbGVkXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSAmJiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygndmlvbGF0ZXMgbm90LW51bGwgY29uc3RyYWludCcpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbWlzc2luZycpKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVHJ5aW5nIGFnYWluIHdpdGggbWluaW1hbCByZXF1aXJlZCBmaWVsZHMnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB3aXRoIGp1c3QgdGhlIGJhcmUgbWluaW11bSBmaWVsZHNcbiAgICAgICAgY29uc3QgbWluaW1hbFByb3BlcnR5ID0ge1xuICAgICAgICAgIG5hbWU6IGBUZXN0IFByb3BlcnR5ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDE2KX1gLFxuICAgICAgICAgIGFkZHJlc3M6ICcxMjMgVGVzdCBTdHJlZXQnLFxuICAgICAgICAgIGNpdHk6ICdBdXN0aW4nLFxuICAgICAgICAgIHN0YXRlOiAnVFgnXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IGRhdGE6IG1pbkRhdGEsIGVycm9yOiBtaW5FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgncHJvcGVydGllcycpXG4gICAgICAgICAgLmluc2VydChtaW5pbWFsUHJvcGVydHkpXG4gICAgICAgICAgLnNlbGVjdCgpO1xuICAgICAgICAgIFxuICAgICAgICBpZiAobWluRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBtaW5pbWFsIHByb3BlcnR5OicsIG1pbkVycm9yKTtcbiAgICAgICAgICB0aHJvdyBtaW5FcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBjcmVhdGVkIG1pbmltYWwgdGVzdCBwcm9wZXJ0eTonLCBtaW5EYXRhKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXRhOiBtaW5EYXRhLFxuICAgICAgICAgIGluZm86ICdDcmVhdGVkIHdpdGggbWluaW1hbCBmaWVsZHMgb25seSdcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdUZXN0IHByb3BlcnR5IGNyZWF0ZWQ6JywgZGF0YSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGEsXG4gICAgICBpbmZvOiAnQ3JlYXRlZCB3aXRoIGZ1bGwgZmllbGRzJ1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNyZWF0ZVRlc3RQcm9wZXJ0eTonLCBlcnIpO1xuICAgIHRocm93IGVycjtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgc3VwYWJhc2U7ICJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJlcnJvciIsInN1cGFiYXNlIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsImRldGVjdFNlc3Npb25JblVybCIsImdldEN1cnJlbnRVc2VyIiwiZGF0YSIsInVzZXIiLCJnZXRVc2VyIiwic2lnblVwIiwiZW1haWwiLCJwYXNzd29yZCIsInNpZ25JbiIsInNpZ25JbldpdGhQYXNzd29yZCIsInNpZ25PdXQiLCJmZXRjaFByb3BlcnRpZXMiLCJvcHRpb25zIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImluY2x1ZGVSZXNlYXJjaCIsInF1ZXJ5IiwiZnJvbSIsInNlbGVjdCIsImZpbHRlcnMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwidW5kZWZpbmVkIiwib3IiLCJlbmRzV2l0aCIsImFjdHVhbEtleSIsInJlcGxhY2UiLCJndGUiLCJsdGUiLCJndCIsImx0IiwiaWxpa2UiLCJlcSIsImJvdW5kcyIsIm5vcnRoIiwic291dGgiLCJlYXN0Iiwid2VzdCIsImluY2x1ZGVJbmNvbXBsZXRlIiwibm90Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJub0xpbWl0IiwicGFnZSIsInBhZ2VTaXplIiwic3RhcnQiLCJlbmQiLCJyYW5nZSIsImxpbWl0Iiwic29ydEJ5Iiwic29ydEFzYyIsIndhcm4iLCJsZW5ndGgiLCJub3JtYWxpemVkUHJvcGVydGllcyIsIm1hcCIsInByb3BlcnR5IiwicmVzZWFyY2hEYXRhIiwicHJvcGVydHlfcmVzZWFyY2giLCJub3JtYWxpemVkUHJvcGVydHkiLCJub3JtYWxpemVQcm9wZXJ0eSIsIm1vZHVsZXMiLCJwcm9wZXJ0eURldGFpbHMiLCJwcm9wZXJ0eV9kZXRhaWxzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJfaXNfZ3JpZF9wYXR0ZXJuIiwiX2Nvb3JkaW5hdGVzX2Zyb21fcmVzZWFyY2giLCJfY29vcmRpbmF0ZXNfbWlzc2luZyIsIl9uZWVkc19nZW9jb2RpbmciLCJpZCIsIl9yZXNlYXJjaCIsImRlcHRoIiwicmVzZWFyY2hfZGVwdGgiLCJkYXRlIiwicmVzZWFyY2hfZGF0ZSIsInN1bW1hcnkiLCJleGVjdXRpdmVfc3VtbWFyeSIsImUiLCJwcm9wZXJ0aWVzV2l0aENvb3JkaW5hdGVzIiwiZmlsdGVyIiwicCIsImpvaW5FcnJvciIsIm5vcm1hbGl6ZWQiLCJ1bml0cyIsIm51bV91bml0cyIsIm5hbWUiLCJ0cmltIiwiYWRkcmVzcyIsInNwbGl0Iiwic3Vic3RyaW5nIiwic3RhdHVzIiwicHJvcGVydHlfc3RhdHVzIiwiX2lzX3Rlc3RfcHJvcGVydHkiLCJpc1Rlc3RQcm9wZXJ0eSIsImlzVmFsaWRMYXRpdHVkZSIsImlzVmFsaWRMb25naXR1ZGUiLCJpc0luQXVzdGluQXJlYSIsImxhdFN0ciIsIlN0cmluZyIsImxuZ1N0ciIsImhhc0xvd1ByZWNpc2lvbiIsImluY2x1ZGVzIiwiaGFzU3VzcGljaW91c1BhdHRlcm4iLCJpc0dyaWRQYXR0ZXJuIiwiX2lzX2ludmFsaWRfcmFuZ2UiLCJfb3V0c2lkZV9hdXN0aW4iLCJ0b0xvd2VyQ2FzZSIsInRlc3RJbmRpY2F0b3JzIiwiaW5kaWNhdG9yIiwicHJpY2UiLCJwbGFjZWhvbGRlckluZGljYXRvcnMiLCJjcmVhdGVUZXN0UHJvcGVydHkiLCJzYW1wbGVQcm9wZXJ0eSIsInNhbXBsZUVycm9yIiwiYmFzZVRlc3RQcm9wZXJ0eSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNsaWNlIiwiY2l0eSIsInN0YXRlIiwiemlwX2NvZGUiLCJ5ZWFyX2J1aWx0IiwicHJvcGVydHlfdHlwZSIsImRlc2NyaXB0aW9uIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJ0ZXN0UHJvcGVydHkiLCJzYW1wbGUiLCJhZGFwdGVkUHJvcGVydHkiLCJrZXlzIiwiaW5zZXJ0IiwibWVzc2FnZSIsIm1pbmltYWxQcm9wZXJ0eSIsIm1pbkRhdGEiLCJtaW5FcnJvciIsImluZm8iLCJlcnIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/supabase.js\n");

/***/ }),

/***/ "./pages/_app.js":
/*!***********************!*\
  !*** ./pages/_app.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/contexts/AuthContext */ \"./src/contexts/AuthContext.js\");\n/* harmony import */ var _src_contexts_ThemeContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/contexts/ThemeContext */ \"./src/contexts/ThemeContext.tsx\");\n/* harmony import */ var _src_styles_globals_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/styles/globals.css */ \"./src/styles/globals.css\");\n/* harmony import */ var _src_styles_globals_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_src_styles_globals_css__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _public_styles_MarkerCluster_Default_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../public/styles/MarkerCluster.Default.css */ \"./public/styles/MarkerCluster.Default.css\");\n/* harmony import */ var _public_styles_MarkerCluster_Default_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_public_styles_MarkerCluster_Default_css__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nfunction MyApp({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_src_contexts_ThemeContext__WEBPACK_IMPORTED_MODULE_2__.ThemeProvider, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_src_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_1__.AuthProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                ...pageProps\n            }, void 0, false, {\n                fileName: \"/Users/guyma/code/projects/acquire/frontend/pages/_app.js\",\n                lineNumber: 10,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/guyma/code/projects/acquire/frontend/pages/_app.js\",\n            lineNumber: 9,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/guyma/code/projects/acquire/frontend/pages/_app.js\",\n        lineNumber: 8,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9fYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDRTtBQUMxQjtBQUNpQjtBQUVwRCxTQUFTRSxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxFQUFFO0lBQ3JDLHFCQUNFLDhEQUFDSCxxRUFBYUE7a0JBQ1osNEVBQUNELG1FQUFZQTtzQkFDWCw0RUFBQ0c7Z0JBQVcsR0FBR0MsU0FBUzs7Ozs7Ozs7Ozs7Ozs7OztBQUloQztBQUVBLGlFQUFlRixLQUFLQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXVzdGluLW11bHRpZmFtaWx5LW1hcC8uL3BhZ2VzL19hcHAuanM/ZTBhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBdXRoUHJvdmlkZXIgfSBmcm9tICcuLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgVGhlbWVQcm92aWRlciB9IGZyb20gJy4uL3NyYy9jb250ZXh0cy9UaGVtZUNvbnRleHQnO1xuaW1wb3J0ICcuLi9zcmMvc3R5bGVzL2dsb2JhbHMuY3NzJztcbmltcG9ydCAnLi4vcHVibGljL3N0eWxlcy9NYXJrZXJDbHVzdGVyLkRlZmF1bHQuY3NzJztcblxuZnVuY3Rpb24gTXlBcHAoeyBDb21wb25lbnQsIHBhZ2VQcm9wcyB9KSB7XG4gIHJldHVybiAoXG4gICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICA8QXV0aFByb3ZpZGVyPlxuICAgICAgICA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XG4gICAgICA8L0F1dGhQcm92aWRlcj5cbiAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE15QXBwOyAiXSwibmFtZXMiOlsiQXV0aFByb3ZpZGVyIiwiVGhlbWVQcm92aWRlciIsIk15QXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/_app.js\n");

/***/ }),

/***/ "./src/contexts/AuthContext.js":
/*!*************************************!*\
  !*** ./src/contexts/AuthContext.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthContext: () => (/* binding */ AuthContext),\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/supabase */ \"./lib/supabase.js\");\n\n\n\n// Create the auth context\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\n// Create the auth provider component\nfunction AuthProvider({ children }) {\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Check for user on initial load\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Get current session\n        const getInitialSession = async ()=>{\n            try {\n                setLoading(true);\n                // Get current user\n                const { data: { user: currentUser }, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.auth.getUser();\n                if (error) {\n                    throw error;\n                }\n                setUser(currentUser);\n            } catch (error) {\n                console.error(\"Error getting initial session:\", error);\n                setError(error.message);\n            } finally{\n                setLoading(false);\n            }\n        };\n        getInitialSession();\n        // Set up auth state listener\n        const { data: { subscription } } = _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.auth.onAuthStateChange((_event, session)=>{\n            setUser(session?.user || null);\n            setLoading(false);\n        });\n        // Clean up subscription on unmount\n        return ()=>{\n            subscription?.unsubscribe();\n        };\n    }, []);\n    // Login with email and password\n    const signInWithEmail = async (email, password)=>{\n        try {\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.auth.signInWithPassword({\n                email,\n                password\n            });\n            if (error) {\n                throw error;\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error signing in:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n    };\n    // Login with Google OAuth\n    const signInWithGoogle = async ()=>{\n        try {\n            // Get the correct origin based on Supabase URL, not the current window location\n            const supabaseUrl = \"https://vdrtfnphuixbguedqhox.supabase.co\";\n            const appUrl = window.location.origin;\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.auth.signInWithOAuth({\n                provider: \"google\",\n                options: {\n                    redirectTo: `${appUrl}/`\n                }\n            });\n            if (error) {\n                throw error;\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error signing in with Google:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n    };\n    // Sign up with email and password\n    const signUpWithEmail = async (email, password)=>{\n        try {\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.auth.signUp({\n                email,\n                password\n            });\n            if (error) {\n                throw error;\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error signing up:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n    };\n    // Sign out\n    const signOut = async ()=>{\n        try {\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.auth.signOut();\n            if (error) {\n                throw error;\n            }\n            return {\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error signing out:\", error);\n            return {\n                error\n            };\n        }\n    };\n    // Reset password\n    const resetPassword = async (email)=>{\n        try {\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.auth.resetPasswordForEmail(email, {\n                redirectTo: `${window.location.origin}/update-password`\n            });\n            if (error) {\n                throw error;\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error resetting password:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n    };\n    // Update password\n    const updatePassword = async (password)=>{\n        try {\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.auth.updateUser({\n                password\n            });\n            if (error) {\n                throw error;\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error updating password:\", error);\n            return {\n                data: null,\n                error\n            };\n        }\n    };\n    // Check if user is admin\n    const isAdmin = !!user; // In a real app you would check a role or permission claim\n    // Create the context value object\n    const value = {\n        user,\n        loading,\n        error,\n        signInWithEmail,\n        signInWithGoogle,\n        signUpWithEmail,\n        signOut,\n        resetPassword,\n        updatePassword,\n        isAdmin\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/guyma/code/projects/acquire/frontend/src/contexts/AuthContext.js\",\n        lineNumber: 183,\n        columnNumber: 5\n    }, this);\n}\n// Create a hook for using the auth context\nfunction useAuth() {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\n    if (context === undefined) {\n        throw new Error(\"useAuth must be used within an AuthProvider\");\n    }\n    return context;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxHQUFHLE1BQU1SLG1EQUFRQSxDQUFDYSxJQUFJLENBQUNnQyxVQUFVLENBQUM7Z0JBQ3JEckI7WUFDRjtZQUVBLElBQUloQixPQUFPO2dCQUNULE1BQU1BO1lBQ1I7WUFFQSxPQUFPO2dCQUFFRztnQkFBTUgsT0FBTztZQUFLO1FBQzdCLEVBQUUsT0FBT0EsT0FBTztZQUNkTyxRQUFRUCxLQUFLLENBQUMsNEJBQTRCQTtZQUMxQyxPQUFPO2dCQUFFRyxNQUFNO2dCQUFNSDtZQUFNO1FBQzdCO0lBQ0Y7SUFFQSx5QkFBeUI7SUFDekIsTUFBTXNDLFVBQVUsQ0FBQyxDQUFDMUMsTUFBTywyREFBMkQ7SUFFcEYsa0NBQWtDO0lBQ2xDLE1BQU0yQyxRQUFRO1FBQ1ozQztRQUNBRTtRQUNBRTtRQUNBYztRQUNBSTtRQUNBYTtRQUNBRTtRQUNBQztRQUNBRTtRQUNBRTtJQUNGO0lBRUEscUJBQ0UsOERBQUM3QyxZQUFZK0MsUUFBUTtRQUFDRCxPQUFPQTtrQkFDMUI1Qzs7Ozs7O0FBR1A7QUFFQSwyQ0FBMkM7QUFDcEMsU0FBUzhDO0lBQ2QsTUFBTUMsVUFBVW5ELGlEQUFVQSxDQUFDRTtJQUMzQixJQUFJaUQsWUFBWUMsV0FBVztRQUN6QixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFDQSxPQUFPRjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXVzdGluLW11bHRpZmFtaWx5LW1hcC8uL3NyYy9jb250ZXh0cy9BdXRoQ29udGV4dC5qcz83ODc2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4uLy4uL2xpYi9zdXBhYmFzZSc7XG5cbi8vIENyZWF0ZSB0aGUgYXV0aCBjb250ZXh0XG5leHBvcnQgY29uc3QgQXV0aENvbnRleHQgPSBjcmVhdGVDb250ZXh0KCk7XG5cbi8vIENyZWF0ZSB0aGUgYXV0aCBwcm92aWRlciBjb21wb25lbnRcbmV4cG9ydCBmdW5jdGlvbiBBdXRoUHJvdmlkZXIoeyBjaGlsZHJlbiB9KSB7XG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcblxuICAvLyBDaGVjayBmb3IgdXNlciBvbiBpbml0aWFsIGxvYWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBHZXQgY3VycmVudCBzZXNzaW9uXG4gICAgY29uc3QgZ2V0SW5pdGlhbFNlc3Npb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IGN1cnJlbnQgdXNlclxuICAgICAgICBjb25zdCB7IGRhdGE6IHsgdXNlcjogY3VycmVudFVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldFVzZXIoY3VycmVudFVzZXIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBpbml0aWFsIHNlc3Npb246JywgZXJyb3IpO1xuICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgZ2V0SW5pdGlhbFNlc3Npb24oKTtcbiAgICBcbiAgICAvLyBTZXQgdXAgYXV0aCBzdGF0ZSBsaXN0ZW5lclxuICAgIGNvbnN0IHsgZGF0YTogeyBzdWJzY3JpcHRpb24gfSB9ID0gc3VwYWJhc2UuYXV0aC5vbkF1dGhTdGF0ZUNoYW5nZSgoX2V2ZW50LCBzZXNzaW9uKSA9PiB7XG4gICAgICBzZXRVc2VyKHNlc3Npb24/LnVzZXIgfHwgbnVsbCk7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBzdWJzY3JpcHRpb24gb24gdW5tb3VudFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzdWJzY3JpcHRpb24/LnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICBcbiAgLy8gTG9naW4gd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmRcbiAgY29uc3Qgc2lnbkluV2l0aEVtYWlsID0gYXN5bmMgKGVtYWlsLCBwYXNzd29yZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25JbldpdGhQYXNzd29yZCh7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2lnbmluZyBpbjonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIExvZ2luIHdpdGggR29vZ2xlIE9BdXRoXG4gIGNvbnN0IHNpZ25JbldpdGhHb29nbGUgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB0aGUgY29ycmVjdCBvcmlnaW4gYmFzZWQgb24gU3VwYWJhc2UgVVJMLCBub3QgdGhlIGN1cnJlbnQgd2luZG93IGxvY2F0aW9uXG4gICAgICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbiAgICAgIGNvbnN0IGFwcFVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aE9BdXRoKHtcbiAgICAgICAgcHJvdmlkZXI6ICdnb29nbGUnLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgcmVkaXJlY3RUbzogYCR7YXBwVXJsfS9gXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNpZ25pbmcgaW4gd2l0aCBHb29nbGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBTaWduIHVwIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXG4gIGNvbnN0IHNpZ25VcFdpdGhFbWFpbCA9IGFzeW5jIChlbWFpbCwgcGFzc3dvcmQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduVXAoe1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNpZ25pbmcgdXA6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBTaWduIG91dFxuICBjb25zdCBzaWduT3V0ID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25PdXQoKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4geyBlcnJvcjogbnVsbCB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzaWduaW5nIG91dDonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIFJlc2V0IHBhc3N3b3JkXG4gIGNvbnN0IHJlc2V0UGFzc3dvcmQgPSBhc3luYyAoZW1haWwpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5yZXNldFBhc3N3b3JkRm9yRW1haWwoZW1haWwsIHtcbiAgICAgICAgcmVkaXJlY3RUbzogYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vdXBkYXRlLXBhc3N3b3JkYCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc2V0dGluZyBwYXNzd29yZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIFVwZGF0ZSBwYXNzd29yZFxuICBjb25zdCB1cGRhdGVQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnVwZGF0ZVVzZXIoe1xuICAgICAgICBwYXNzd29yZFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcGFzc3dvcmQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBDaGVjayBpZiB1c2VyIGlzIGFkbWluXG4gIGNvbnN0IGlzQWRtaW4gPSAhIXVzZXI7ICAvLyBJbiBhIHJlYWwgYXBwIHlvdSB3b3VsZCBjaGVjayBhIHJvbGUgb3IgcGVybWlzc2lvbiBjbGFpbVxuICBcbiAgLy8gQ3JlYXRlIHRoZSBjb250ZXh0IHZhbHVlIG9iamVjdFxuICBjb25zdCB2YWx1ZSA9IHtcbiAgICB1c2VyLFxuICAgIGxvYWRpbmcsXG4gICAgZXJyb3IsXG4gICAgc2lnbkluV2l0aEVtYWlsLFxuICAgIHNpZ25JbldpdGhHb29nbGUsXG4gICAgc2lnblVwV2l0aEVtYWlsLFxuICAgIHNpZ25PdXQsXG4gICAgcmVzZXRQYXNzd29yZCxcbiAgICB1cGRhdGVQYXNzd29yZCxcbiAgICBpc0FkbWluXG4gIH07XG4gIFxuICByZXR1cm4gKFxuICAgIDxBdXRoQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17dmFsdWV9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvQXV0aENvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59XG5cbi8vIENyZWF0ZSBhIGhvb2sgZm9yIHVzaW5nIHRoZSBhdXRoIGNvbnRleHRcbmV4cG9ydCBmdW5jdGlvbiB1c2VBdXRoKCkge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChBdXRoQ29udGV4dCk7XG4gIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUF1dGggbXVzdCBiZSB1c2VkIHdpdGhpbiBhbiBBdXRoUHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn0gIl0sIm5hbWVzIjpbImNyZWF0ZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNvbnRleHQiLCJzdXBhYmFzZSIsIkF1dGhDb250ZXh0IiwiQXV0aFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJ1c2VyIiwic2V0VXNlciIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImdldEluaXRpYWxTZXNzaW9uIiwiZGF0YSIsImN1cnJlbnRVc2VyIiwiYXV0aCIsImdldFVzZXIiLCJjb25zb2xlIiwibWVzc2FnZSIsInN1YnNjcmlwdGlvbiIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwiX2V2ZW50Iiwic2Vzc2lvbiIsInVuc3Vic2NyaWJlIiwic2lnbkluV2l0aEVtYWlsIiwiZW1haWwiLCJwYXNzd29yZCIsInNpZ25JbldpdGhQYXNzd29yZCIsInNpZ25JbldpdGhHb29nbGUiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJhcHBVcmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiIsInNpZ25JbldpdGhPQXV0aCIsInByb3ZpZGVyIiwib3B0aW9ucyIsInJlZGlyZWN0VG8iLCJzaWduVXBXaXRoRW1haWwiLCJzaWduVXAiLCJzaWduT3V0IiwicmVzZXRQYXNzd29yZCIsInJlc2V0UGFzc3dvcmRGb3JFbWFpbCIsInVwZGF0ZVBhc3N3b3JkIiwidXBkYXRlVXNlciIsImlzQWRtaW4iLCJ2YWx1ZSIsIlByb3ZpZGVyIiwidXNlQXV0aCIsImNvbnRleHQiLCJ1bmRlZmluZWQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/contexts/AuthContext.js\n");

/***/ }),

/***/ "./src/contexts/ThemeContext.tsx":
/*!***************************************!*\
  !*** ./src/contexts/ThemeContext.tsx ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ThemeProvider: () => (/* binding */ ThemeProvider),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useTheme: () => (/* binding */ useTheme)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * ThemeContext.tsx\n * Context for managing light/dark mode across the application\n * \n * This context provides:\n * - Current theme state (light/dark)\n * - Toggle function to switch between themes\n * - Automatic detection of system preference\n * - Theme persistence with localStorage\n * \n * Usage:\n * 1. Wrap your app with ThemeProvider in _app.tsx\n * 2. Use useTheme() hook in components to access theme state and toggle function\n * 3. Apply conditional classes using the isDarkMode boolean\n */ \n\nconst ThemeContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nconst ThemeProvider = ({ children, defaultTheme = \"light\" })=>{\n    // Initialize theme from localStorage or defaultTheme\n    const [theme, setThemeState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{\n        // Check for saved theme in localStorage\n        if (false) {}\n        return defaultTheme;\n    });\n    // Effect to apply theme to document\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (false) {}\n    }, [\n        theme\n    ]);\n    // Listen for system preference changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (false) {}\n    }, []);\n    const toggleTheme = ()=>{\n        setThemeState((prevTheme)=>prevTheme === \"light\" ? \"dark\" : \"light\");\n    };\n    const setTheme = (newTheme)=>{\n        setThemeState(newTheme);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ThemeContext.Provider, {\n        value: {\n            theme,\n            isDarkMode: theme === \"dark\",\n            toggleTheme,\n            setTheme\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/guyma/code/projects/acquire/frontend/src/contexts/ThemeContext.tsx\",\n        lineNumber: 104,\n        columnNumber: 5\n    }, undefined);\n};\nconst useTheme = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ThemeContext);\n    if (context === undefined) {\n        throw new Error(\"useTheme must be used within a ThemeProvider\");\n    }\n    return context;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThemeContext);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29udGV4dHMvVGhlbWVDb250ZXh0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7O0NBY0M7QUFFd0Y7QUFXekYsTUFBTUssNkJBQWVKLG9EQUFhQSxDQUErQks7QUFPMUQsTUFBTUMsZ0JBQThDLENBQUMsRUFDMURDLFFBQVEsRUFDUkMsZUFBZSxPQUFPLEVBQ3ZCO0lBQ0MscURBQXFEO0lBQ3JELE1BQU0sQ0FBQ0MsT0FBT0MsY0FBYyxHQUFHVCwrQ0FBUUEsQ0FBUTtRQUM3Qyx3Q0FBd0M7UUFDeEMsSUFBSSxLQUFrQixFQUFhLEVBV2xDO1FBRUQsT0FBT087SUFDVDtJQUVBLG9DQUFvQztJQUNwQ04sZ0RBQVNBLENBQUM7UUFDUixJQUFJLEtBQWtCLEVBQWEsRUFZbEM7SUFDSCxHQUFHO1FBQUNPO0tBQU07SUFFVix1Q0FBdUM7SUFDdkNQLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxLQUFrRCxFQUFFLEVBZXZEO0lBQ0gsR0FBRyxFQUFFO0lBRUwsTUFBTTJCLGNBQWM7UUFDbEJuQixjQUFjb0IsQ0FBQUEsWUFBY0EsY0FBYyxVQUFVLFNBQVM7SUFDL0Q7SUFFQSxNQUFNQyxXQUFXLENBQUNDO1FBQ2hCdEIsY0FBY3NCO0lBQ2hCO0lBRUEscUJBQ0UsOERBQUM1QixhQUFhNkIsUUFBUTtRQUNwQkMsT0FBTztZQUNMekI7WUFDQTBCLFlBQVkxQixVQUFVO1lBQ3RCb0I7WUFDQUU7UUFDRjtrQkFFQ3hCOzs7Ozs7QUFHUCxFQUFFO0FBRUssTUFBTTZCLFdBQVc7SUFDdEIsTUFBTUMsVUFBVWxDLGlEQUFVQSxDQUFDQztJQUUzQixJQUFJaUMsWUFBWWhDLFdBQVc7UUFDekIsTUFBTSxJQUFJaUMsTUFBTTtJQUNsQjtJQUVBLE9BQU9EO0FBQ1QsRUFBRTtBQUVGLGlFQUFlakMsWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2F1c3Rpbi1tdWx0aWZhbWlseS1tYXAvLi9zcmMvY29udGV4dHMvVGhlbWVDb250ZXh0LnRzeD83ZTIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhlbWVDb250ZXh0LnRzeFxuICogQ29udGV4dCBmb3IgbWFuYWdpbmcgbGlnaHQvZGFyayBtb2RlIGFjcm9zcyB0aGUgYXBwbGljYXRpb25cbiAqIFxuICogVGhpcyBjb250ZXh0IHByb3ZpZGVzOlxuICogLSBDdXJyZW50IHRoZW1lIHN0YXRlIChsaWdodC9kYXJrKVxuICogLSBUb2dnbGUgZnVuY3Rpb24gdG8gc3dpdGNoIGJldHdlZW4gdGhlbWVzXG4gKiAtIEF1dG9tYXRpYyBkZXRlY3Rpb24gb2Ygc3lzdGVtIHByZWZlcmVuY2VcbiAqIC0gVGhlbWUgcGVyc2lzdGVuY2Ugd2l0aCBsb2NhbFN0b3JhZ2VcbiAqIFxuICogVXNhZ2U6XG4gKiAxLiBXcmFwIHlvdXIgYXBwIHdpdGggVGhlbWVQcm92aWRlciBpbiBfYXBwLnRzeFxuICogMi4gVXNlIHVzZVRoZW1lKCkgaG9vayBpbiBjb21wb25lbnRzIHRvIGFjY2VzcyB0aGVtZSBzdGF0ZSBhbmQgdG9nZ2xlIGZ1bmN0aW9uXG4gKiAzLiBBcHBseSBjb25kaXRpb25hbCBjbGFzc2VzIHVzaW5nIHRoZSBpc0RhcmtNb2RlIGJvb2xlYW5cbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ29udGV4dCwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuXG50eXBlIFRoZW1lID0gJ2xpZ2h0JyB8ICdkYXJrJztcblxuaW50ZXJmYWNlIFRoZW1lQ29udGV4dFR5cGUge1xuICB0aGVtZTogVGhlbWU7XG4gIGlzRGFya01vZGU6IGJvb2xlYW47XG4gIHRvZ2dsZVRoZW1lOiAoKSA9PiB2b2lkO1xuICBzZXRUaGVtZTogKHRoZW1lOiBUaGVtZSkgPT4gdm9pZDtcbn1cblxuY29uc3QgVGhlbWVDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxUaGVtZUNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG5pbnRlcmZhY2UgVGhlbWVQcm92aWRlclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbiAgZGVmYXVsdFRoZW1lPzogVGhlbWU7XG59XG5cbmV4cG9ydCBjb25zdCBUaGVtZVByb3ZpZGVyOiBSZWFjdC5GQzxUaGVtZVByb3ZpZGVyUHJvcHM+ID0gKHsgXG4gIGNoaWxkcmVuLCBcbiAgZGVmYXVsdFRoZW1lID0gJ2xpZ2h0JyBcbn0pID0+IHtcbiAgLy8gSW5pdGlhbGl6ZSB0aGVtZSBmcm9tIGxvY2FsU3RvcmFnZSBvciBkZWZhdWx0VGhlbWVcbiAgY29uc3QgW3RoZW1lLCBzZXRUaGVtZVN0YXRlXSA9IHVzZVN0YXRlPFRoZW1lPigoKSA9PiB7XG4gICAgLy8gQ2hlY2sgZm9yIHNhdmVkIHRoZW1lIGluIGxvY2FsU3RvcmFnZVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3Qgc2F2ZWRUaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpIGFzIFRoZW1lO1xuICAgICAgXG4gICAgICBpZiAoc2F2ZWRUaGVtZSkge1xuICAgICAgICByZXR1cm4gc2F2ZWRUaGVtZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHN5c3RlbSBwcmVmZXJlbmNlXG4gICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEgJiYgd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5tYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiAnZGFyayc7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkZWZhdWx0VGhlbWU7XG4gIH0pO1xuXG4gIC8vIEVmZmVjdCB0byBhcHBseSB0aGVtZSB0byBkb2N1bWVudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gU2F2ZSB0aGVtZSB0byBsb2NhbFN0b3JhZ2VcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIHRoZW1lKTtcbiAgICAgIFxuICAgICAgLy8gQXBwbHkgdGhlbWUgdG8gZG9jdW1lbnQgYnkgdG9nZ2xpbmcgZGFyayBjbGFzcyBvbiBodG1sIGVsZW1lbnRcbiAgICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICBcbiAgICAgIGlmICh0aGVtZSA9PT0gJ2RhcmsnKSB7XG4gICAgICAgIGh0bWwuY2xhc3NMaXN0LmFkZCgnZGFyaycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaHRtbC5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbdGhlbWVdKTtcblxuICAvLyBMaXN0ZW4gZm9yIHN5c3RlbSBwcmVmZXJlbmNlIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm1hdGNoTWVkaWEpIHtcbiAgICAgIGNvbnN0IG1lZGlhUXVlcnkgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpO1xuICAgICAgXG4gICAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoZTogTWVkaWFRdWVyeUxpc3RFdmVudCkgPT4ge1xuICAgICAgICAvLyBPbmx5IGF1dG8tc3dpdGNoIGlmIHVzZXIgaGFzbid0IGV4cGxpY2l0bHkgY2hvc2VuIGEgdGhlbWVcbiAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKSkge1xuICAgICAgICAgIHNldFRoZW1lU3RhdGUoZS5tYXRjaGVzID8gJ2RhcmsnIDogJ2xpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIG1lZGlhUXVlcnkuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlQ2hhbmdlKTtcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgbWVkaWFRdWVyeS5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVDaGFuZ2UpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCB0b2dnbGVUaGVtZSA9ICgpID0+IHtcbiAgICBzZXRUaGVtZVN0YXRlKHByZXZUaGVtZSA9PiAocHJldlRoZW1lID09PSAnbGlnaHQnID8gJ2RhcmsnIDogJ2xpZ2h0JykpO1xuICB9O1xuXG4gIGNvbnN0IHNldFRoZW1lID0gKG5ld1RoZW1lOiBUaGVtZSkgPT4ge1xuICAgIHNldFRoZW1lU3RhdGUobmV3VGhlbWUpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFRoZW1lQ29udGV4dC5Qcm92aWRlciBcbiAgICAgIHZhbHVlPXt7IFxuICAgICAgICB0aGVtZSwgXG4gICAgICAgIGlzRGFya01vZGU6IHRoZW1lID09PSAnZGFyaycsXG4gICAgICAgIHRvZ2dsZVRoZW1lLCBcbiAgICAgICAgc2V0VGhlbWUgXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1RoZW1lQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCB1c2VUaGVtZSA9ICgpOiBUaGVtZUNvbnRleHRUeXBlID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KTtcbiAgXG4gIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZVRoZW1lIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBUaGVtZVByb3ZpZGVyJyk7XG4gIH1cbiAgXG4gIHJldHVybiBjb250ZXh0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVGhlbWVDb250ZXh0OyJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNvbnRleHQiLCJUaGVtZUNvbnRleHQiLCJ1bmRlZmluZWQiLCJUaGVtZVByb3ZpZGVyIiwiY2hpbGRyZW4iLCJkZWZhdWx0VGhlbWUiLCJ0aGVtZSIsInNldFRoZW1lU3RhdGUiLCJzYXZlZFRoZW1lIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwic2V0SXRlbSIsImh0bWwiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIm1lZGlhUXVlcnkiLCJoYW5kbGVDaGFuZ2UiLCJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0b2dnbGVUaGVtZSIsInByZXZUaGVtZSIsInNldFRoZW1lIiwibmV3VGhlbWUiLCJQcm92aWRlciIsInZhbHVlIiwiaXNEYXJrTW9kZSIsInVzZVRoZW1lIiwiY29udGV4dCIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/contexts/ThemeContext.tsx\n");

/***/ }),

/***/ "./public/styles/MarkerCluster.Default.css":
/*!*************************************************!*\
  !*** ./public/styles/MarkerCluster.Default.css ***!
  \*************************************************/
/***/ (() => {



/***/ }),

/***/ "./src/styles/globals.css":
/*!********************************!*\
  !*** ./src/styles/globals.css ***!
  \********************************/
/***/ (() => {



/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();